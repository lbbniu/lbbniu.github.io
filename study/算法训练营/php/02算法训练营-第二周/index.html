<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" href="http://fonts.useso.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <title>  &middot; lbbniu</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="这里是lbbniu的个人博客" />

<meta name="keywords" content="">


<meta property="og:title" content="  &middot; lbbniu ">
<meta property="og:site_name" content="lbbniu"/>
<meta property="og:url" content="https://blog.lbbniu.com/study/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83%E8%90%A5/php/02%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83%E8%90%A5-%E7%AC%AC%E4%BA%8C%E5%91%A8/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="0001-01-01T00:00:00Z" />
<meta property="og:article:modified_time" content="0001-01-01T00:00:00Z" />

  

  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "",
    "author": {
      "@type": "Person",
      "name": "lbbniu"
    },
    "datePublished": "0001-01-01",
    "description": "",
    "wordCount":  2211 
  }
</script>



<link rel="canonical" href="https://blog.lbbniu.com/study/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83%E8%90%A5/php/02%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83%E8%90%A5-%E7%AC%AC%E4%BA%8C%E5%91%A8/" />

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://blog.lbbniu.com/touch-icon-144-precomposed.png">
<link href="https://blog.lbbniu.com/favicon.png" rel="icon">

<meta name="generator" content="Hugo 0.89.4" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link href='https://fonts.googleapis.com/css?family=Merriweather:300%7CRaleway%7COpen+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/highlight/default.css">

  
  
</head>
<body>
  <main id="main-wrapper" class="container main_wrapper has-sidebar">
    <header id="main-header" class="container main_header">
  <div class="container brand">
  <div class="container title h1-like">
  <a class="baselink" href="https://blog.lbbniu.com/">
  lbbniu

</a>

</div>

  
<div class="container topline">
  
  学无止境，然则问可少耶?


</div>


</div>

  <nav class="container nav primary no-print">
  

<a class="homelink" href="https://blog.lbbniu.com/">首页</a>


  
<a href="https://blog.lbbniu.com/post" title="Show list of posts">列表</a>

<a href="https://blog.lbbniu.com/golang" title="Show list of tags">Golang</a>

<a href="https://blog.lbbniu.com/k8s" title="Show list of tags">Kubernetes</a>

<a href="https://blog.lbbniu.com/tags" title="Show list of tags">标签</a>

<a href="https://blog.lbbniu.com/about">关于</a>


</nav>

<div class="container nav secondary no-print">
  
<a id="contact-link-email" class="contact_link" rel="me" aria-label="Email" href="mailto:lbbniu@gmail.com">
  <span class="fa fa-envelope-square"></span></a>



<a id="contact-link-github" class="contact_link" rel="me" aria-label="Github" href="https://github.com/lbbniu">
  <span class="fa fa-github-square"></span></a>




 


















</div>


  

</header>


<article id="main-content" class="container main_content single">
  <header class="container hat">
  <h1>
</h1>

</header>

  <div class="container content">
  <h1 id="第2周-第4课--栈队列优先队列双端队列">第2周 第4课 | 栈、队列、优先队列、双端队列</h1>
<h2 id="参考链接">参考链接</h2>
<ul>
<li><a href="http://docs.oracle.com/javase/10/docs/api/java/util/PriorityQueue.html">Java 的 PriorityQueue 文档</a></li>
<li><a href="http://developer.classpath.org/doc/java/util/Stack-source.html">Java 的 Stack 源码</a></li>
<li><a href="http://fuseyism.com/classpath/doc/java/util/Queue-source.html">Java 的 Queue 源码</a></li>
<li><a href="http://docs.python.org/2/library/heapq.html">Python 的 heapq</a></li>
<li><a href="http://docs.python.org/2/library/collections.html">高性能的 container 库</a></li>
</ul>
<h2 id="预习题目">预习题目</h2>
<h4 id="20-有效的括号httpsleetcode-cncomproblemsvalid-parentheses"><a href="https://leetcode-cn.com/problems/valid-parentheses/">20. 有效的括号</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法一：栈(spl标准库)
</span><span style="color:#e6db74">     * @param String $s
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isValid</span>($s) {
        <span style="color:#75715e">//构造哈希表
</span><span style="color:#75715e"></span>		$map <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;)&#39;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;(&#39;</span>, <span style="color:#e6db74">&#39;]&#39;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;[&#39;</span>, <span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;{&#39;</span>];
        $stack <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">SplStack</span>();
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, $len <span style="color:#f92672">=</span> <span style="color:#a6e22e">strlen</span>($s); $i <span style="color:#f92672">&lt;</span> $len; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isset</span>($map[$s[$i]])) {
                $stack<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">push</span>($s[$i]);
            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>$stack<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">count</span>() <span style="color:#f92672">||</span> $stack<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">pop</span>() <span style="color:#f92672">!=</span> $map[$s[$i]]) {
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
            }
        }
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">!</span>$stack<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">count</span>();
    }
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 用数组模拟栈 (比spl标准库速度快)
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isValid1</span>($s) {
        $map <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;)&#39;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;(&#39;</span>, <span style="color:#e6db74">&#39;]&#39;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;[&#39;</span>, <span style="color:#e6db74">&#39;}&#39;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;{&#39;</span>];
        $stack <span style="color:#f92672">=</span> [];
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, $len <span style="color:#f92672">=</span> <span style="color:#a6e22e">strlen</span>($s); $i <span style="color:#f92672">&lt;</span> $len; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isset</span>($map[$s[$i]])) {
                $stack[] <span style="color:#f92672">=</span> $s[$i];
            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">empty</span>($stack) <span style="color:#f92672">||</span> <span style="color:#a6e22e">array_pop</span>($stack) <span style="color:#f92672">!=</span> $map[$s[$i]]) {
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
            }
        }
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">empty</span>($stack);
    }
    <span style="color:#75715e">//方法二：暴力（字符串替换）
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isValid2</span>() {
        
    }
}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span>(object):
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">isValid</span>(self, s):
        mymap <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;)&#39;</span>:<span style="color:#e6db74">&#39;(&#39;</span>, <span style="color:#e6db74">&#39;]&#39;</span>:<span style="color:#e6db74">&#39;[&#39;</span>, <span style="color:#e6db74">&#39;}&#39;</span>:<span style="color:#e6db74">&#39;{&#39;</span>}
        stack <span style="color:#f92672">=</span> []
        <span style="color:#66d9ef">for</span> c <span style="color:#f92672">in</span> s:
            <span style="color:#66d9ef">if</span> c <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> mymap:
                stack<span style="color:#f92672">.</span>append(c)
            <span style="color:#66d9ef">elif</span> <span style="color:#f92672">not</span> stack <span style="color:#f92672">or</span> stack<span style="color:#f92672">.</span>pop() <span style="color:#f92672">!=</span> mymap[c]:
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">not</span> stack
</code></pre></div><h4 id="155-最小栈httpsleetcode-cncomproblemsmin-stack"><a href="https://leetcode-cn.com/problems/min-stack/">155. 最小栈</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MinStack</span> {
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    <span style="color:#75715e">/** initialize your data structure here. */</span>
    MinStack() {

    }
    
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">push</span>(<span style="color:#66d9ef">int</span> x) {
        _data.push(x);
        <span style="color:#66d9ef">if</span> (_min.empty()) {
            _min.push(x);
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">if</span> (_min.top() <span style="color:#f92672">&lt;</span> x) {
                x <span style="color:#f92672">=</span> _min.top();
            }
            _min.push(x);
        }
    }
    
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pop</span>() {
        <span style="color:#75715e">//数据栈和最小栈同时出栈
</span><span style="color:#75715e"></span>        _data.pop();
		_min.pop();
    }
    
    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">top</span>() {
		<span style="color:#66d9ef">return</span> _data.top();
    }
    
    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getMin</span>() {
		<span style="color:#66d9ef">return</span> _min.top();
    }
<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
    std<span style="color:#f92672">::</span>stack<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> _data;
    std<span style="color:#f92672">::</span>stack<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> _min;
};

<span style="color:#75715e">/**
</span><span style="color:#75715e"> * Your MinStack object will be instantiated and called as such:
</span><span style="color:#75715e"> * MinStack* obj = new MinStack();
</span><span style="color:#75715e"> * obj-&gt;push(x);
</span><span style="color:#75715e"> * obj-&gt;pop();
</span><span style="color:#75715e"> * int param_3 = obj-&gt;top();
</span><span style="color:#75715e"> * int param_4 = obj-&gt;getMin();
</span><span style="color:#75715e"> */</span>
</code></pre></div><h2 id="实战题目">实战题目</h2>
<h4 id="84-柱状图中最大的矩形httpsleetcode-cncomproblemslargest-rectangle-in-histogram"><a href="https://leetcode-cn.com/problems/largest-rectangle-in-histogram/">84. 柱状图中最大的矩形</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {
	<span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法一：暴力（算出两两柱子直接的面积）[执行超时]
</span><span style="color:#e6db74">     * 时间：O(n^3)
</span><span style="color:#e6db74">     * 空间：O(1)
</span><span style="color:#e6db74">     * @param Integer[] $heights
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">largestRectangleArea</span>($heights) {
        $maxarea <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, $count <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($heights); $i <span style="color:#f92672">&lt;</span> $count; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> ($j <span style="color:#f92672">=</span> $i; $j <span style="color:#f92672">&lt;</span> $count; $j<span style="color:#f92672">++</span>) {
             	<span style="color:#75715e">//找两个柱子之间的最小高度
</span><span style="color:#75715e"></span>                $min_height <span style="color:#f92672">=</span> $heights[$i];
                <span style="color:#66d9ef">for</span> ($k <span style="color:#f92672">=</span> $i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>; $k <span style="color:#f92672">&lt;=</span>$j; $k<span style="color:#f92672">++</span>) $min_height <span style="color:#f92672">=</span> <span style="color:#a6e22e">min</span>($min_height, $heights[$k]);
                $maxarea <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($maxarea, $min_height <span style="color:#f92672">*</span> ($j <span style="color:#f92672">-</span> $i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>));
            }
        }
        <span style="color:#66d9ef">return</span> $maxarea;
    }
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法二：优化的暴力（用一对柱子之间的最低高度，就当前柱子的最低高度）[执行超时]
</span><span style="color:#e6db74">     * 时间：O(n^2)
</span><span style="color:#e6db74">     * 空间：O(1)
</span><span style="color:#e6db74">     * @param Integer[] $heights
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">largestRectangleArea</span>($heights) {
        $maxarea <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, $count <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($heights); $i <span style="color:#f92672">&lt;</span> $count; $i<span style="color:#f92672">++</span>) {
            $min_height <span style="color:#f92672">=</span> $heights[$i];
            <span style="color:#66d9ef">for</span> ($j <span style="color:#f92672">=</span> $i; $j <span style="color:#f92672">&lt;</span> $count; $j<span style="color:#f92672">++</span>) {
             	<span style="color:#75715e">//求当前柱子的最低高度
</span><span style="color:#75715e"></span>                $min_height <span style="color:#f92672">=</span> <span style="color:#a6e22e">min</span>($min_height, $heights[$j]);
                <span style="color:#75715e">//记录最大面积
</span><span style="color:#75715e"></span>                $maxarea <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($maxarea, $min_height <span style="color:#f92672">*</span> ($j <span style="color:#f92672">-</span> $i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>));
            }
        }
        <span style="color:#66d9ef">return</span> $maxarea;
    }
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法三：分治（递归）[执行超时]
</span><span style="color:#e6db74">     * 时间：O(nlongn)
</span><span style="color:#e6db74">     * 空间：O(n)
</span><span style="color:#e6db74">     * @param Integer[] $heights
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">largestRectangleArea</span>($heights) {
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">maxArea</span>($heights, <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">count</span>($heights) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>);
    }
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">maxArea</span>($heights, $start, $end) {
        <span style="color:#66d9ef">if</span> ($start <span style="color:#f92672">&gt;</span> $end) <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
        $min_index <span style="color:#f92672">=</span> $start;
        <span style="color:#75715e">//计算区间最小高度
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> $start <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>; $i <span style="color:#f92672">&lt;=</span> $end; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">if</span> ($heights[$min_index] <span style="color:#f92672">&gt;</span> $heights[$i]) $min_index <span style="color:#f92672">=</span> $i; 
        }
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">max</span>($heights[$min_index] <span style="color:#f92672">*</span> ($end <span style="color:#f92672">-</span> $start <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>), $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">maxArea</span>($heights,$start, $min_index <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>), $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">maxArea</span>($heights, $min_index <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, $end));
    }
    
    <span style="color:#75715e">//方法四：优化的分治（代码比较长）[放弃]
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//https://leetcode.com/problems/largest-rectangle-in-histogram/discuss/28941/segment-tree-solution-just-another-idea-onlogn-solution
</span><span style="color:#75715e"></span>    
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法五：栈(最优解)
</span><span style="color:#e6db74">     * @param Integer[] $heights
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">largestRectangleArea</span>($heights) {
        $stack <span style="color:#f92672">=</span> [<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]; <span style="color:#75715e">//数组模拟栈, 并初始化
</span><span style="color:#75715e"></span>        $maxarea <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $count <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($heights);
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $count; $i<span style="color:#f92672">++</span>) {
            <span style="color:#75715e">//如果比栈顶元素小，出栈计算面积，并更新面积最大值
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span> (<span style="color:#a6e22e">end</span>($stack) <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> $heights[<span style="color:#a6e22e">end</span>($stack)] <span style="color:#f92672">&gt;</span> $heights[$i]) {
				$maxarea <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($maxarea, $heights[<span style="color:#a6e22e">array_pop</span>($stack)] <span style="color:#f92672">*</span> ($i <span style="color:#f92672">-</span> <span style="color:#a6e22e">end</span>($stack) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>));
            }
            $stack[] <span style="color:#f92672">=</span> $i;
        }
        <span style="color:#66d9ef">while</span> (<span style="color:#a6e22e">end</span>($stack) <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
            $maxarea <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($maxarea, $heights[<span style="color:#a6e22e">array_pop</span>($stack)] <span style="color:#f92672">*</span> ($count <span style="color:#f92672">-</span> <span style="color:#a6e22e">end</span>($stack) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>));
        }
        <span style="color:#66d9ef">return</span> $maxarea;
    }
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">largestRectangleArea</span>($heights) {
        $stack <span style="color:#f92672">=</span> []; <span style="color:#75715e">//数组模拟栈
</span><span style="color:#75715e"></span>        $heights[] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $maxarea <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $count <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($heights);
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $count; $i<span style="color:#f92672">++</span>) {
            <span style="color:#75715e">//如果比栈顶元素小，出栈计算面积，并更新面积最大值
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span> ($stack <span style="color:#f92672">&amp;&amp;</span> $heights[<span style="color:#a6e22e">end</span>($stack)] <span style="color:#f92672">&gt;</span> $heights[$i]) {
				$maxarea <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($maxarea, $heights[<span style="color:#a6e22e">array_pop</span>($stack)] <span style="color:#f92672">*</span> ($i <span style="color:#f92672">-</span> <span style="color:#a6e22e">end</span>($stack) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>));
            }
            $stack[] <span style="color:#f92672">=</span> $i;
        }
        <span style="color:#a6e22e">array_pop</span>($heights);
        <span style="color:#66d9ef">return</span> $maxarea;
    }
}
</code></pre></div><h4 id="239-滑动窗口最大值httpsleetcode-cncomproblemssliding-window-maximum"><a href="https://leetcode-cn.com/problems/sliding-window-maximum/">239. 滑动窗口最大值</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法一：暴力（每次去k个数字中的最大值,共有n-k+1个窗口）
</span><span style="color:#e6db74">     * @param Integer[] $nums
</span><span style="color:#e6db74">     * @param Integer $k
</span><span style="color:#e6db74">     * @return Integer[]
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">maxSlidingWindow</span>($nums, $k) {
        $res <span style="color:#f92672">=</span> [];
        $n <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($nums);
        <span style="color:#66d9ef">for</span>($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $n <span style="color:#f92672">-</span> $k <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>; $i<span style="color:#f92672">++</span>){
            <span style="color:#75715e">//$max = max(array_slice($nums, $i, $k));
</span><span style="color:#75715e"></span>            $max <span style="color:#f92672">=</span> $nums[$i];
            <span style="color:#66d9ef">for</span>($j <span style="color:#f92672">=</span> $i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>; $j <span style="color:#f92672">&lt;</span> $i <span style="color:#f92672">+</span> $k; $j<span style="color:#f92672">++</span>){
                <span style="color:#66d9ef">if</span>($nums[$j] <span style="color:#f92672">&gt;</span> $max){
                    $max <span style="color:#f92672">=</span> $nums[$j];
                }
            }
            $res[]<span style="color:#f92672">=</span> $max;
        }
        <span style="color:#66d9ef">return</span> $res;
    }
    <span style="color:#75715e">//方法二：双端队列
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">maxSlidingWindow</span>($nums, $k) {
        $res <span style="color:#f92672">=</span> [];
        $n <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($nums);
        $window <span style="color:#f92672">=</span> [];<span style="color:#75715e">//数据模拟双端队列
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $n; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">if</span> ($window <span style="color:#f92672">&amp;&amp;</span> $window[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">&lt;=</span> $i <span style="color:#f92672">-</span> $k) {
                <span style="color:#a6e22e">array_shift</span>($window);
            }
            <span style="color:#66d9ef">while</span> ($window <span style="color:#f92672">&amp;&amp;</span> $nums[<span style="color:#a6e22e">end</span>($window)] <span style="color:#f92672">&lt;</span> $nums[$i]) {
                <span style="color:#a6e22e">array_pop</span>($window);
            }
            $window[] <span style="color:#f92672">=</span> $i;
            <span style="color:#75715e">//i大于等于k-1
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> ($i <span style="color:#f92672">&gt;=</span> $k <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) $res[]<span style="color:#f92672">=</span> $nums[$window[<span style="color:#ae81ff">0</span>]];
        }
        <span style="color:#66d9ef">return</span> $res;
    }
    <span style="color:#75715e">//方法三：动态规划
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">maxSlidingWindow</span>($nums, $k) {
        $len <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($nums);
        <span style="color:#75715e">//初始化
</span><span style="color:#75715e"></span>        $left <span style="color:#f92672">=</span> $right <span style="color:#f92672">=</span> [];
        $left[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> $nums[<span style="color:#ae81ff">0</span>]; 
        $right[$len <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> $nums[$len <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>];
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; $i <span style="color:#f92672">&lt;</span> $len; $i<span style="color:#f92672">++</span>) {
            <span style="color:#75715e">//计算left
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> ($i <span style="color:#f92672">%</span> $k <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) $left[$i] <span style="color:#f92672">=</span> $nums[$i];
            <span style="color:#66d9ef">else</span> $left[$i] <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($left[$i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>], $nums[$i]);
            <span style="color:#75715e">//计算right
</span><span style="color:#75715e"></span>            $j <span style="color:#f92672">=</span> $len <span style="color:#f92672">-</span> $i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
            <span style="color:#66d9ef">if</span> (($j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">%</span> $k <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) $right[$j] <span style="color:#f92672">=</span> $nums[$j];
            <span style="color:#66d9ef">else</span> $right[$j] <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($nums[$j], $right[$j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]); 
        }
        <span style="color:#75715e">//计算结果
</span><span style="color:#75715e"></span>        $res <span style="color:#f92672">=</span> [];
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $len <span style="color:#f92672">-</span> $k <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>; $i<span style="color:#f92672">++</span>) {
            $res[] <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($left[$i <span style="color:#f92672">+</span> $k <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], $right[$i]);
        }
        <span style="color:#66d9ef">return</span> $res;
    }
}
</code></pre></div><h2 id="课后作业">课后作业</h2>
<h4 id="用-add-first-或-add-last-这套新的-api-改写-deque-的代码">用 add first 或 add last 这套新的 API 改写 Deque 的代码</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Deque<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> deque <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;();</span>
deque<span style="color:#f92672">.</span><span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;a&#34;</span><span style="color:#f92672">);</span>
deque<span style="color:#f92672">.</span><span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;b&#34;</span><span style="color:#f92672">);</span>
deque<span style="color:#f92672">.</span><span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;c&#34;</span><span style="color:#f92672">);</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>deque<span style="color:#f92672">);</span>
String str <span style="color:#f92672">=</span> deque<span style="color:#f92672">.</span><span style="color:#a6e22e">peekFirst</span><span style="color:#f92672">();</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>deque<span style="color:#f92672">);</span>
<span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>deque<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>deque<span style="color:#f92672">.</span><span style="color:#a6e22e">removseFirst</span><span style="color:#f92672">());</span>
<span style="color:#f92672">}</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>deque<span style="color:#f92672">);</span>
</code></pre></div><h4 id="分析-queue-和-priority-queue-的源码">分析 Queue 和 Priority Queue 的源码</h4>
<h4 id="641-设计循环双端队列httpsleetcode-cncomproblemsdesign-circular-deque"><a href="https://leetcode-cn.com/problems/design-circular-deque/">641. 设计循环双端队列</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyCircularDeque</span> {
    <span style="color:#66d9ef">private</span> $front <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">private</span> $rear <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">private</span> $cap <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">private</span> $data <span style="color:#f92672">=</span> [];
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Initialize your data structure here. Set the size of the deque to be k.
</span><span style="color:#e6db74">     * @param Integer $k
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> __construct($k) {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">cap</span> <span style="color:#f92672">=</span> $k <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
    }
  
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Adds an item at the front of Deque. Return true if the operation is successful.
</span><span style="color:#e6db74">     * @param Integer $value
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">insertFront</span>($value) {
        <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">isFull</span>()) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">front</span> <span style="color:#f92672">=</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">front</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">cap</span>) <span style="color:#f92672">%</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">cap</span>;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">data</span>[$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">front</span>] <span style="color:#f92672">=</span> $value;
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }
  
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Adds an item at the rear of Deque. Return true if the operation is successful.
</span><span style="color:#e6db74">     * @param Integer $value
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">insertLast</span>($value) {
        <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">isFull</span>()) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">data</span>[$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rear</span>] <span style="color:#f92672">=</span> $value;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rear</span> <span style="color:#f92672">=</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rear</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">%</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">cap</span>;
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }
  
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Deletes an item from the front of Deque. Return true if the operation is successful.
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">deleteFront</span>() {
        <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">isEmpty</span>()) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">front</span> <span style="color:#f92672">=</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">front</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">%</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">cap</span>;
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }
  
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Deletes an item from the rear of Deque. Return true if the operation is successful.
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">deleteLast</span>() {
        <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">isEmpty</span>()) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rear</span> <span style="color:#f92672">=</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rear</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">cap</span>) <span style="color:#f92672">%</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">cap</span>;
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }
  
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Get the front item from the deque.
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getFront</span>() {
        <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">isEmpty</span>()) <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">data</span>[$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">front</span>];
    }
  
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Get the last item from the deque.
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getRear</span>() {
        <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">isEmpty</span>()) <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">data</span>[($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rear</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">cap</span>) <span style="color:#f92672">%</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">cap</span>];
    }
  
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Checks whether the circular deque is empty or not.
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isEmpty</span>() {
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">front</span> <span style="color:#f92672">==</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rear</span>;
    }
  
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Checks whether the circular deque is full or not.
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isFull</span>() {
        <span style="color:#66d9ef">return</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rear</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">cap</span>) <span style="color:#f92672">%</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">cap</span> <span style="color:#f92672">==</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">front</span>;
    }
}

<span style="color:#e6db74">/**
</span><span style="color:#e6db74"> * Your MyCircularDeque object will be instantiated and called as such:
</span><span style="color:#e6db74"> * $obj = MyCircularDeque($k);
</span><span style="color:#e6db74"> * $ret_1 = $obj-&gt;insertFront($value);
</span><span style="color:#e6db74"> * $ret_2 = $obj-&gt;insertLast($value);
</span><span style="color:#e6db74"> * $ret_3 = $obj-&gt;deleteFront();
</span><span style="color:#e6db74"> * $ret_4 = $obj-&gt;deleteLast();
</span><span style="color:#e6db74"> * $ret_5 = $obj-&gt;getFront();
</span><span style="color:#e6db74"> * $ret_6 = $obj-&gt;getRear();
</span><span style="color:#e6db74"> * $ret_7 = $obj-&gt;isEmpty();
</span><span style="color:#e6db74"> * $ret_8 = $obj-&gt;isFull();
</span><span style="color:#e6db74"> */</span>
</code></pre></div><h4 id="42-接雨水httpsleetcode-cncomproblemstrapping-rain-water"><a href="https://leetcode-cn.com/problems/trapping-rain-water/">42. 接雨水</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    <span style="color:#66d9ef">int</span> trap(vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&amp;</span> height) {

    }
};
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 栈
</span><span style="color:#e6db74">     * @param Integer[] $height
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trap</span>($height) {
		$ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $stack <span style="color:#f92672">=</span> [];
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, $l <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($height); $i <span style="color:#f92672">&lt;</span> $l; $i<span style="color:#f92672">++</span>) {
            <span style="color:#75715e">//栈不为空，切栈顶元素小于当前值
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span> ($stack <span style="color:#f92672">&amp;&amp;</span> $height[<span style="color:#a6e22e">end</span>($stack)] <span style="color:#f92672">&lt;</span> $height[$i]) {
                $top <span style="color:#f92672">=</span> $height[<span style="color:#a6e22e">array_pop</span>($stack)];
                <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>$stack) <span style="color:#66d9ef">break</span>;
                $width <span style="color:#f92672">=</span> $i <span style="color:#f92672">-</span> <span style="color:#a6e22e">end</span>($stack) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
                $ans <span style="color:#f92672">+=</span> $width <span style="color:#f92672">*</span> (<span style="color:#a6e22e">min</span>($height[$i], $height[<span style="color:#a6e22e">end</span>($stack)]) <span style="color:#f92672">-</span> $top);
            }
            $stack[] <span style="color:#f92672">=</span> $i;
        }
        <span style="color:#66d9ef">return</span> $ans;
    }
}
</code></pre></div><h1 id="第2周-第5课--哈希表映射集合">第2周 第5课 | 哈希表、映射、集合</h1>
<h2 id="参考链接-1">参考链接</h2>
<ul>
<li><a href="http://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/Set.html">Java Set 文档</a></li>
<li><a href="http://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/Map.html">Java Map 文档</a></li>
</ul>
<h2 id="课后作业-1">课后作业</h2>
<p>写一个关于 HashMap 的小总结</p>
<h2 id="实战题目--课后作业">实战题目 / 课后作业</h2>
<h4 id="242-有效的字母异位词httpsleetcode-cncomproblemsvalid-anagram"><a href="https://leetcode-cn.com/problems/valid-anagram/">242. 有效的字母异位词</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法一：暴力解法（排序）
</span><span style="color:#e6db74">     * @param String $s
</span><span style="color:#e6db74">     * @param String $t
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isAnagram</span>($s, $t) {
        <span style="color:#75715e">//return count_chars($s,1) == count_chars($t,1); //精简写法
</span><span style="color:#75715e"></span>		$s <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_split</span>($s);
        $t <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_split</span>($t);
        <span style="color:#a6e22e">sort</span>($s);
        <span style="color:#a6e22e">sort</span>($t);
        <span style="color:#66d9ef">return</span> $s <span style="color:#f92672">==</span> $t;
    }
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法二：哈希表（map）
</span><span style="color:#e6db74">     * @param String $s
</span><span style="color:#e6db74">     * @param String $t
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isAnagram</span>($s, $t) {
        <span style="color:#75715e">//todo: 判断长度是否相同
</span><span style="color:#75715e"></span>		$s_map <span style="color:#f92672">=</span> $t_map <span style="color:#f92672">=</span> [];
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">strlen</span>($s); $i<span style="color:#f92672">++</span>) {
            $s_map[$s[$i]] <span style="color:#f92672">=</span> <span style="color:#a6e22e">isset</span>($s_map[$s[$i]]) <span style="color:#f92672">?</span> $s_map[$s[$i]] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>;
        }
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">strlen</span>($t); $i<span style="color:#f92672">++</span>) {
            $t_map[$t[$i]] <span style="color:#f92672">=</span> <span style="color:#a6e22e">isset</span>($t_map[$t[$i]]) <span style="color:#f92672">?</span> $t_map[$t[$i]] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>;
        }
        <span style="color:#a6e22e">ksort</span>($s_map);
        <span style="color:#a6e22e">ksort</span>($t_map);
        <span style="color:#66d9ef">return</span> $s_map <span style="color:#f92672">==</span> $t_map;
    }
}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isAnagram</span><span style="color:#f92672">(</span>String s<span style="color:#f92672">,</span> String t<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> alphabet <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>26<span style="color:#f92672">];</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> s<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> i<span style="color:#f92672">++)</span> alphabet<span style="color:#f92672">[</span>s<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> <span style="color:#e6db74">&#39;a&#39;</span><span style="color:#f92672">]++;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> t<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">();</span> i<span style="color:#f92672">++)</span> alphabet<span style="color:#f92672">[</span>t<span style="color:#f92672">.</span><span style="color:#a6e22e">charAt</span><span style="color:#f92672">(</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> <span style="color:#e6db74">&#39;a&#39;</span><span style="color:#f92672">]--;</span>
        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">:</span> alphabet<span style="color:#f92672">)</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">!=</span> 0<span style="color:#f92672">)</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="49-字母异位词分组httpsleetcode-cncomproblemsgroup-anagrams"><a href="https://leetcode-cn.com/problems/group-anagrams/">49. 字母异位词分组</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法一：暴力（排序后作为键）
</span><span style="color:#e6db74">     * @param String[] $strs
</span><span style="color:#e6db74">     * @return String[][]
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">groupAnagrams</span>($strs) {
        $map <span style="color:#f92672">=</span> [];
		<span style="color:#66d9ef">foreach</span> ($strs <span style="color:#66d9ef">as</span> $str) {
            $tstr <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_split</span>($str);
            <span style="color:#a6e22e">sort</span>($tstr);
            $key <span style="color:#f92672">=</span> <span style="color:#a6e22e">implode</span>(<span style="color:#e6db74">&#34;&#34;</span>, $tstr);
            $map[$key][] <span style="color:#f92672">=</span> $str;
        }
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">array_values</span>($map);
    }
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">groupAnagrams</span>($strs) {
        $map <span style="color:#f92672">=</span> [];
		<span style="color:#66d9ef">foreach</span> ($strs <span style="color:#66d9ef">as</span> $str) {
            $t_map <span style="color:#f92672">=</span> [];
            <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, $l <span style="color:#f92672">=</span> <span style="color:#a6e22e">strlen</span>($str); $i <span style="color:#f92672">&lt;</span> $l; $i<span style="color:#f92672">++</span>) {
                <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isset</span>($t_map[$str[$i]])) $t_map[$str[$i]] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
                $t_map[$str[$i]]<span style="color:#f92672">++</span>;
            }
            <span style="color:#a6e22e">ksort</span>($t_map);
            <span style="color:#75715e">//$key = json_encode($t_map);
</span><span style="color:#75715e"></span>            $key <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
            <span style="color:#66d9ef">foreach</span>($t_map <span style="color:#66d9ef">as</span> $k<span style="color:#f92672">=&gt;</span>$v) {
                $key <span style="color:#f92672">.=</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>$k<span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">{</span>$v<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>;
            }
            $map[$key][] <span style="color:#f92672">=</span> $str;
        }
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">array_values</span>($map);
    }
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">groupAnagrams</span>($strs) {
         $resArr <span style="color:#f92672">=</span> [];
        <span style="color:#75715e">// 将 26 个字母映射为 素数，求积可得唯一 key，相当于一个无冲突的 hash function
</span><span style="color:#75715e"></span>        $prime <span style="color:#f92672">=</span> [<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">13</span>, <span style="color:#ae81ff">17</span>, <span style="color:#ae81ff">19</span>, <span style="color:#ae81ff">23</span>, <span style="color:#ae81ff">29</span>, <span style="color:#ae81ff">31</span>, <span style="color:#ae81ff">41</span>, <span style="color:#ae81ff">43</span>, <span style="color:#ae81ff">47</span>, <span style="color:#ae81ff">53</span>, <span style="color:#ae81ff">59</span>, <span style="color:#ae81ff">61</span>, <span style="color:#ae81ff">67</span>, <span style="color:#ae81ff">71</span>, <span style="color:#ae81ff">73</span>, <span style="color:#ae81ff">79</span>, <span style="color:#ae81ff">83</span>, <span style="color:#ae81ff">89</span>, <span style="color:#ae81ff">97</span>, <span style="color:#ae81ff">101</span>, <span style="color:#ae81ff">103</span>];
        <span style="color:#66d9ef">foreach</span> ($strs <span style="color:#66d9ef">as</span> $str) {
            $strlen <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
            <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">strlen</span>($str); $i<span style="color:#f92672">++</span>) {
                $strlen <span style="color:#f92672">*=</span> $prime[<span style="color:#a6e22e">ord</span>($str[$i]) <span style="color:#f92672">-</span> <span style="color:#ae81ff">97</span>];
            }   
            $resArr[$strlen][] <span style="color:#f92672">=</span> $str;
        }
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">array_values</span>($resArr);
    }
}
</code></pre></div><h4 id="1-两数之和httpsleetcode-cncomproblemstwo-sum"><a href="https://leetcode-cn.com/problems/two-sum/">1. 两数之和</a></h4>
<h2 id="参考链接-2">参考链接</h2>
<ul>
<li><a href="http://shimo.im/docs/R6g9WJV89QkHrDhr">养成收藏精选代码的习惯（示例）</a></li>
</ul>
<h2 id="本周作业">本周作业</h2>
<h3 id="简单">简单：</h3>
<ul>
<li>用 add first 或 add last 这套新的 API 改写 Deque 的代码</li>
<li>分析 Queue 和 Priority Queue 的源码</li>
</ul>
<p>说明：改写代码和分析源码这两项作业，同学们需要在第 2 周的学习总结中完成。如果不熟悉 Java 语言，这两项作业可选做。</p>
<ul>
<li>写一个关于 HashMap 的小总结。</li>
</ul>
<p>说明：对于不熟悉 Java 语言的同学，此项作业可选做。</p>
<h4 id="1-两数之和httpsleetcode-cncomproblemstwo-sum-1"><a href="https://leetcode-cn.com/problems/two-sum/">1. 两数之和</a></h4>
<h3 id="中等">中等：</h3>
<h4 id="49-字母异位词分组httpsleetcode-cncomproblemsgroup-anagrams-1"><a href="https://leetcode-cn.com/problems/group-anagrams/">49. 字母异位词分组</a></h4>
<h4 id="641-设计循环双端队列httpsleetcode-cncomproblemsdesign-circular-deque-1"><a href="https://leetcode-cn.com/problems/design-circular-deque/">641. 设计循环双端队列</a></h4>
<h3 id="困难">困难：</h3>
<h4 id="42-接雨水httpsleetcode-cncomproblemstrapping-rain-water-1"><a href="https://leetcode-cn.com/problems/trapping-rain-water/">42. 接雨水</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法一：暴力
</span><span style="color:#e6db74">     * @param Integer[] $height
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trap</span>($height) {
		$ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $len <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($height);
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; $i <span style="color:#f92672">&lt;</span> $len <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; $i<span style="color:#f92672">++</span>) {
            $max_left <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $max_right <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
            <span style="color:#75715e">//求左侧最大高度
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">for</span> ($j <span style="color:#f92672">=</span> $i; $j <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>; $j<span style="color:#f92672">--</span>) {
                $max_left <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($max_left, $height[$j]);
            }
            <span style="color:#75715e">//求右侧最大高度
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">for</span> ($j <span style="color:#f92672">=</span> $i; $j <span style="color:#f92672">&lt;</span> $len; $j<span style="color:#f92672">++</span>) {
                $max_right <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($max_right, $height[$j]);
            }
            $ans <span style="color:#f92672">+=</span> <span style="color:#a6e22e">min</span>($max_left, $max_right) <span style="color:#f92672">-</span> $height[$i];
        }
        <span style="color:#66d9ef">return</span> $ans;
    }
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法 2：动态编程
</span><span style="color:#e6db74">     * @param Integer[] $height
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trap</span>($height) {
		$ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $len <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($height);
        $left_max <span style="color:#f92672">=</span> $right_max <span style="color:#f92672">=</span> [];
        <span style="color:#75715e">//计算左边最大值数组
</span><span style="color:#75715e"></span>        $left_max[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> $height[<span style="color:#ae81ff">0</span>];
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; $i <span style="color:#f92672">&lt;</span> $len; $i<span style="color:#f92672">++</span>) {
            $left_max[$i] <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($height[$i], $left_max[$i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>]);
        }
        $right_max[$len <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> $height[$len <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>];
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> $len <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>; $i <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>; $i<span style="color:#f92672">--</span>) {
            $right_max[$i] <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>($height[$i], $right_max[$i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]);
        }
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; $i <span style="color:#f92672">&lt;</span> $len <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; $i<span style="color:#f92672">++</span>) {
            $ans <span style="color:#f92672">+=</span> <span style="color:#a6e22e">min</span>($left_max[$i], $right_max[$i]) <span style="color:#f92672">-</span> $height[$i];
        }
        <span style="color:#66d9ef">return</span> $ans;
    }
     <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法 3：栈
</span><span style="color:#e6db74">     * @param Integer[] $height
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trap</span>($height) {
		$ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $len <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($height);
        $stack <span style="color:#f92672">=</span> [];
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $len; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">while</span> ($stack <span style="color:#f92672">&amp;&amp;</span> $height[$i] <span style="color:#f92672">&gt;</span> $height[<span style="color:#a6e22e">end</span>($stack)]) {
                $top <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_pop</span>($stack);
                <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">empty</span>($stack)) <span style="color:#66d9ef">break</span>; 
     			$w <span style="color:#f92672">=</span> $i <span style="color:#f92672">-</span> <span style="color:#a6e22e">end</span>($stack) <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
                $h <span style="color:#f92672">=</span> <span style="color:#a6e22e">min</span>($height[<span style="color:#a6e22e">end</span>($stack)], $height[$i]) <span style="color:#f92672">-</span> $height[$top]
                $ans <span style="color:#f92672">+=</span> $w <span style="color:#f92672">*</span> $h;
            }
            $stack[] <span style="color:#f92672">=</span> $i;
        }
        <span style="color:#66d9ef">return</span> $ans;
    }
     <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 方法 4：双指针
</span><span style="color:#e6db74">     * @param Integer[] $height
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">trap</span>($height) {
		$ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $left <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $right <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($height) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
        $left_max <span style="color:#f92672">=</span> $right_max <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">while</span> ($left <span style="color:#f92672">&lt;</span> $right) {
            <span style="color:#66d9ef">if</span> ($height[$left] <span style="color:#f92672">&lt;</span> $height[$right]) {
				$left_max <span style="color:#f92672">&lt;=</span> $height[$left] <span style="color:#f92672">?</span> $left_max <span style="color:#f92672">=</span> $height[$left] <span style="color:#f92672">:</span> $ans <span style="color:#f92672">+=</span> $left_max <span style="color:#f92672">-</span> $height[$left];
                $left<span style="color:#f92672">++</span>;
            } <span style="color:#66d9ef">else</span> {
                $right_max <span style="color:#f92672">&lt;=</span> $height[$right] <span style="color:#f92672">?</span> $right_max <span style="color:#f92672">=</span> $height[$right] <span style="color:#f92672">:</span> $ans <span style="color:#f92672">+=</span> $right_max <span style="color:#f92672">-</span> $height[$right];
                $right<span style="color:#f92672">--</span>;
            }
        }
        <span style="color:#66d9ef">return</span> $ans;
    }
}
</code></pre></div><h2 id="总结">总结</h2>
<h4 id="1-两数之和httpsleetcode-cncomproblemstwo-sum-2"><a href="https://leetcode-cn.com/problems/two-sum/">1. 两数之和</a></h4>
<p>方法一：暴力两层循环【时间复杂度：O(n^2)，空间复杂度：O(1)】</p>
<p>方法二：哈希表（最优解）【时间复杂度：O(n)，空间复杂度：O(n)，空间换时间】</p>
<h4 id="20-有效的括号httpsleetcode-cncomproblemsvalid-parentheses-1"><a href="https://leetcode-cn.com/problems/valid-parentheses/">20. 有效的括号</a></h4>
<p>方法一：字符串替换【时间复杂度：O(?)，空间复杂度：O(1)】</p>
<p>方法二：栈（最优解）【时间复杂度：O(n)，空间复杂度：O(n)】</p>
<h4 id="42-接雨水httpsleetcode-cncomproblemstrapping-rain-water-2"><a href="https://leetcode-cn.com/problems/trapping-rain-water/">42. 接雨水</a></h4>
<p>方法一：栈（单调递减）【时间复杂度：O(n)，空间复杂度：O(n)】</p>
<p>方法二：双指针（值得研究）【时间复杂度：O(n)，空间复杂度：O(1)】</p>
<p>方法三：动态规划【时间复杂度：O(n)，空间复杂度：O(n)】</p>
<p>方法四：暴力枚举【时间复杂度：O(n^2)，空间复杂度：O(1)】</p>
<p>方法五：按行求【时间复杂度：O(n*m)，m最高柱子，空间复杂度：O(1)】</p>
<p>方法六：按列求【时间复杂度：O(n^2)，空间复杂度：O(1)】</p>
<h4 id="49-字母异位词分组httpsleetcode-cncomproblemsgroup-anagrams-2"><a href="https://leetcode-cn.com/problems/group-anagrams/">49. 字母异位词分组</a></h4>
<p>方法一：哈希表【空间复杂度：O(nk)】</p>
<p>哈希算法：</p>
<ul>
<li>字母计数【时间复杂度：O(nk)】、</li>
<li>字符串排序【时间复杂度：O(n*klogk)】</li>
<li>质数的<a href="https://zh.wikipedia.org/wiki/%E7%A7%AF">积</a>【时间复杂度：O(nk)，算法很巧妙，个人觉得短时间写出26个质数，好像也不怎么容易】</li>
</ul>
<h4 id="84-柱状图中最大的矩形httpsleetcode-cncomproblemslargest-rectangle-in-histogram-1"><a href="https://leetcode-cn.com/problems/largest-rectangle-in-histogram/">84. 柱状图中最大的矩形</a></h4>
<p>方法三、四、五：PHP对应算法执行超时，java提交通过</p>
<p>方法一：栈（单调递增）【时间复杂度：O(n)，空间复杂度：O(n)】</p>
<p>方法二：动态规划 【时间复杂度：O(n)，空间复杂度：O(n)】<a href="https://leetcode.com/problems/largest-rectangle-in-histogram/discuss/28902/5ms-O(n)-Java-solution-explained-(beats-96)">参考代码</a></p>
<p>方法三：暴力方法（三层循环（最内层查找区间最低柱子））【时间复杂度：O(n^3)，空间复杂度：O(1)】</p>
<p>方法四：优化的暴力1（双层循环直接计算面积并记录最大值）【时间复杂度：O(n^2)，空间复杂度：O(1)】</p>
<p>方法五：优化的暴力2（直接查找当前柱子的左右第一个最低柱子）【时间复杂度：O(n^2)，空间复杂度：O(1)】</p>
<p>方法六：普通分治【时间复杂度：平均O(nlogn)，最坏：O(n^2)，空间复杂度：O(n)】</p>
<p>方法七：优化分治【时间复杂度：平均O(nlogn)，最坏：O(n^2)，空间复杂度：O(n)，代码相对较多】<a href="https://leetcode.com/problems/largest-rectangle-in-histogram/discuss/28941/segment-tree-solution-just-another-idea-onlogn-solution">参考地址</a></p>
<h4 id="155-最小栈httpsleetcode-cncomproblemsmin-stack-1"><a href="https://leetcode-cn.com/problems/min-stack/">155. 最小栈</a></h4>
<p>方法一：双栈（数据栈和最小值栈）【入栈、出栈、获取最小值时间复杂度均为：O(1)，空间复杂度：O(n)】</p>
<p>方法二：单个栈（很巧妙）【<a href="https://leetcode-cn.com/problems/min-stack/solution/java-jian-ji-wu-fu-zhu-zhan-by-rabbitzhao-2/">参考</a>】</p>
<h4 id="239-滑动窗口最大值httpsleetcode-cncomproblemssliding-window-maximum-1"><a href="https://leetcode-cn.com/problems/sliding-window-maximum/">239. 滑动窗口最大值</a></h4>
<p>方法一：双端队列（最优解）【时间复杂度：O(n)，空间复杂度：O(n)】</p>
<p>方法二：暴力（对窗口中K个元素排序）【时间复杂度：O(n*k)，空间复杂度：O(n)】</p>
<p>方法三：动态规划【时间复杂度：O(n)，空间复杂度：O(n)】</p>
<h4 id="242-有效的字母异位词httpsleetcode-cncomproblemsvalid-anagram-1"><a href="https://leetcode-cn.com/problems/valid-anagram/">242. 有效的字母异位词</a></h4>
<p>方法一：哈希表【时间复杂度：O(n)，空间复杂度：O(1)】</p>
<p>方法二：排序比较【时间复杂度：O(nlogn)，空间复杂度：O(1)】</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//php 一行
</span><span style="color:#75715e"></span><span style="color:#66d9ef">return</span> <span style="color:#a6e22e">count_chars</span>($s,<span style="color:#ae81ff">1</span>) <span style="color:#f92672">==</span> <span style="color:#a6e22e">count_chars</span>($t,<span style="color:#ae81ff">1</span>)
</code></pre></div><h4 id="641-设计循环双端队列httpsleetcode-cncomproblemsdesign-circular-deque-2"><a href="https://leetcode-cn.com/problems/design-circular-deque/">641. 设计循环双端队列</a></h4>
<p>方法一：使用数组实现</p>
<p>方法二：使用链表实现</p>
<h3 id="java相关题目">JAVA相关题目</h3>
<h4 id="用-add-first-或-add-last-这套新的-api-改写-deque-的代码-1">用 add first 或 add last 这套新的 API 改写 Deque 的代码</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Deque<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> deque <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> LinkedList<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;();</span>
deque<span style="color:#f92672">.</span><span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;a&#34;</span><span style="color:#f92672">);</span>
deque<span style="color:#f92672">.</span><span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;b&#34;</span><span style="color:#f92672">);</span>
deque<span style="color:#f92672">.</span><span style="color:#a6e22e">addFirst</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;c&#34;</span><span style="color:#f92672">);</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>deque<span style="color:#f92672">);</span>
String str <span style="color:#f92672">=</span> deque<span style="color:#f92672">.</span><span style="color:#a6e22e">peekFirst</span><span style="color:#f92672">();</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>deque<span style="color:#f92672">);</span>
<span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>deque<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>deque<span style="color:#f92672">.</span><span style="color:#a6e22e">removseFirst</span><span style="color:#f92672">());</span>
<span style="color:#f92672">}</span>
System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>deque<span style="color:#f92672">);</span>
</code></pre></div><h4 id="分析-queue-和-priority-queue-的源码待补充">分析 Queue 和 Priority Queue 的源码（待补充）</h4>
<h4 id="关于-hashmap-的小总结待补充">关于 HashMap 的小总结（待补充）</h4>
<blockquote>
<p>如果哪里有错误，请高手指出</p>
</blockquote>
<h2 id="下周预习">下周预习</h2>
<h3 id="预习知识点">预习知识点：</h3>
<ul>
<li><a href="http://time.geekbang.org/column/article/67856">二叉树基础（上）：什么样的二叉树适合用数组来存储？</a></li>
<li><a href="http://time.geekbang.org/column/article/68334">二叉树基础（下）：有了如此高效的散列表，为什么还需要二叉树？</a></li>
<li><a href="http://time.geekbang.org/column/article/69388">递归树：如何借助树来求解递归算法的时间复杂度？</a></li>
<li><a href="http://time.geekbang.org/column/article/73503">分治算法：谈一谈大规模计算框架 MapReduce 中的分治思想</a></li>
<li><a href="http://time.geekbang.org/column/article/74287">回溯算法：从电影《蝴蝶效应》中学习回溯算法的核心思想</a></li>
</ul>
<h3 id="预习题目-1">预习题目：</h3>
<ul>
<li><a href="http://leetcode-cn.com/problems/binary-tree-inorder-traversal/">二叉树的中序遍历</a></li>
<li><a href="http://leetcode-cn.com/problems/climbing-stairs/">爬楼梯</a></li>
<li><a href="http://leetcode-cn.com/problems/generate-parentheses/">括号生成</a></li>
<li><a href="http://leetcode-cn.com/problems/powx-n/">Pow(x, n)</a></li>
<li><a href="http://leetcode-cn.com/problems/subsets/">子集</a></li>
</ul>

</div>


  
</article>
      <footer id="main-footer" class="container main_footer">
  

  <div class="container nav foot no-print">
  
<a href="https://blog.lbbniu.com/license">license</a>


  <a class="toplink" href="#">back to top</a>

</div>

  <div class="container credits">
  
<div class="container footline">
  
  code with <!-- raw HTML omitted --><!-- raw HTML omitted -->


</div>


  
<div class="container copyright">
  
  (c) 2021 lbbniu.


</div>


</div>

</footer>

    </main>
    


<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



    
  </body>
</html>

