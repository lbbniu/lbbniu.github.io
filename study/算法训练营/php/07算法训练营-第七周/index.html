<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" href="http://fonts.useso.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <title>  &middot; lbbniu</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="这里是lbbniu的个人博客" />

<meta name="keywords" content="">


<meta property="og:title" content="  &middot; lbbniu ">
<meta property="og:site_name" content="lbbniu"/>
<meta property="og:url" content="https://blog.lbbniu.com/study/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83%E8%90%A5/php/07%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83%E8%90%A5-%E7%AC%AC%E4%B8%83%E5%91%A8/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="0001-01-01T00:00:00Z" />
<meta property="og:article:modified_time" content="0001-01-01T00:00:00Z" />

  

  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "",
    "author": {
      "@type": "Person",
      "name": "lbbniu"
    },
    "datePublished": "0001-01-01",
    "description": "",
    "wordCount":  4028 
  }
</script>



<link rel="canonical" href="https://blog.lbbniu.com/study/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83%E8%90%A5/php/07%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83%E8%90%A5-%E7%AC%AC%E4%B8%83%E5%91%A8/" />

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://blog.lbbniu.com/touch-icon-144-precomposed.png">
<link href="https://blog.lbbniu.com/favicon.png" rel="icon">

<meta name="generator" content="Hugo 0.89.4" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link href='https://fonts.googleapis.com/css?family=Merriweather:300%7CRaleway%7COpen+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/highlight/default.css">

  
  
</head>
<body>
  <main id="main-wrapper" class="container main_wrapper has-sidebar">
    <header id="main-header" class="container main_header">
  <div class="container brand">
  <div class="container title h1-like">
  <a class="baselink" href="https://blog.lbbniu.com/">
  lbbniu

</a>

</div>

  
<div class="container topline">
  
  学无止境，然则问可少耶?


</div>


</div>

  <nav class="container nav primary no-print">
  

<a class="homelink" href="https://blog.lbbniu.com/">首页</a>


  
<a href="https://blog.lbbniu.com/post" title="Show list of posts">列表</a>

<a href="https://blog.lbbniu.com/golang" title="Show list of tags">Golang</a>

<a href="https://blog.lbbniu.com/k8s" title="Show list of tags">Kubernetes</a>

<a href="https://blog.lbbniu.com/tags" title="Show list of tags">标签</a>

<a href="https://blog.lbbniu.com/about">关于</a>


</nav>

<div class="container nav secondary no-print">
  
<a id="contact-link-email" class="contact_link" rel="me" aria-label="Email" href="mailto:lbbniu@gmail.com">
  <span class="fa fa-envelope-square"></span></a>



<a id="contact-link-github" class="contact_link" rel="me" aria-label="Github" href="https://github.com/lbbniu">
  <span class="fa fa-github-square"></span></a>




 


















</div>


  

</header>


<article id="main-content" class="container main_content single">
  <header class="container hat">
  <h1>
</h1>

</header>

  <div class="container content">
  <h1 id="第7周-第13课--字典树和并查集">第7周 第13课 | 字典树和并查集</h1>
<h2 id="1-trie树的基本实现和特性">1. Trie树的基本实现和特性</h2>
<h3 id="参考链接">参考链接</h3>
<h4 id="102-二叉树的层序遍历httpsleetcode-cncomproblemsbinary-tree-level-order-traversal"><a href="https://leetcode-cn.com/problems/binary-tree-level-order-traversal/">102. 二叉树的层序遍历</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#e6db74">/**
</span><span style="color:#e6db74"> * Definition for a binary tree node.
</span><span style="color:#e6db74"> * class TreeNode {
</span><span style="color:#e6db74"> *     public $val = null;
</span><span style="color:#e6db74"> *     public $left = null;
</span><span style="color:#e6db74"> *     public $right = null;
</span><span style="color:#e6db74"> *     function __construct($value) { $this-&gt;val = $value; }
</span><span style="color:#e6db74"> * }
</span><span style="color:#e6db74"> */</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * bfs
</span><span style="color:#e6db74">     * @param TreeNode $root
</span><span style="color:#e6db74">     * @return Integer[][]
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">levelOrder</span>($root) {
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>$root) <span style="color:#66d9ef">return</span> [];
        $queue <span style="color:#f92672">=</span> [$root];
        $res <span style="color:#f92672">=</span> [];
        <span style="color:#66d9ef">while</span> ($queue) {
            $count <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($queue);
            $row <span style="color:#f92672">=</span> [];
            <span style="color:#66d9ef">while</span> ($count<span style="color:#f92672">--</span>) {
                $node <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_shift</span>($queue);
                $row[] <span style="color:#f92672">=</span> $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">val</span>;
                $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">&amp;&amp;</span> $queue[] <span style="color:#f92672">=</span> $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">left</span>;
                $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">&amp;&amp;</span> $queue[] <span style="color:#f92672">=</span> $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">right</span>;
            }
            $res[] <span style="color:#f92672">=</span> $row;
        }
    	<span style="color:#66d9ef">return</span> $res;
    }
    <span style="color:#75715e">//
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">levelOrder</span>($root) {
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>$root) <span style="color:#66d9ef">return</span> [];
        $res <span style="color:#f92672">=</span> [];
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">dfs</span>($res, <span style="color:#ae81ff">0</span>, $root);
    	<span style="color:#66d9ef">return</span> $res;
    }
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">dfs</span>(<span style="color:#f92672">&amp;</span>$res, $level, $root) {
        <span style="color:#66d9ef">if</span>($level <span style="color:#f92672">==</span> <span style="color:#a6e22e">count</span>($res)) $res[] <span style="color:#f92672">=</span> [];
        $res[$level][] <span style="color:#f92672">=</span> $root<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">val</span>;
        $root<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">left</span> <span style="color:#f92672">&amp;&amp;</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">dfs</span>($res, $level <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, $root<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">left</span>);
        $root<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">right</span> <span style="color:#f92672">&amp;&amp;</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">dfs</span>($res, $level <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, $root<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">right</span>);
    }
}
</code></pre></div><h4 id="208-实现-trie-前缀树httpsleetcode-cncomproblemsimplement-trie-prefix-tree"><a href="https://leetcode-cn.com/problems/implement-trie-prefix-tree/">208. 实现 Trie (前缀树)</a></h4>
<h4 id="tire-树代码模板httpsshimoimdocspk6vpy3hj9hkkh33"><a href="https://shimo.im/docs/Pk6vPY3HJ9hKkh33">Tire 树代码模板</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Trie</span>(object):
  
	<span style="color:#66d9ef">def</span> __init__(self): 
		self<span style="color:#f92672">.</span>root <span style="color:#f92672">=</span> {} 
		self<span style="color:#f92672">.</span>end_of_word <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#&#34;</span> 
 
	<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert</span>(self, word): 
		node <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>root 
		<span style="color:#66d9ef">for</span> char <span style="color:#f92672">in</span> word: 
			node <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span>setdefault(char, {}) 
		node[self<span style="color:#f92672">.</span>end_of_word] <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>end_of_word 
 
	<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">search</span>(self, word): 
		node <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>root 
		<span style="color:#66d9ef">for</span> char <span style="color:#f92672">in</span> word: 
			<span style="color:#66d9ef">if</span> char <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> node: 
				<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span> 
			node <span style="color:#f92672">=</span> node[char] 
		<span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>end_of_word <span style="color:#f92672">in</span> node 
 
	<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">startsWith</span>(self, prefix): 
		node <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>root 
		<span style="color:#66d9ef">for</span> char <span style="color:#f92672">in</span> prefix: 
			<span style="color:#66d9ef">if</span> char <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> node: 
				<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span> 
			node <span style="color:#f92672">=</span> node[char] 
		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</code></pre></div><h2 id="2-trie树实战题目解析单词搜索2">2. Trie树实战题目解析：单词搜索2</h2>
<h4 id="208-实现-trie-前缀树httpsleetcode-cncomproblemsimplement-trie-prefix-tree-1"><a href="https://leetcode-cn.com/problems/implement-trie-prefix-tree/">208. 实现 Trie (前缀树)</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span> {
    <span style="color:#66d9ef">public</span> $is_end <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
    <span style="color:#66d9ef">public</span> $child <span style="color:#f92672">=</span> [];
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Trie</span> {
    <span style="color:#66d9ef">private</span> $root <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
    
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Initialize your data structure here.
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> __construct() {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Node</span>();
    }
  
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Inserts a word into the trie.
</span><span style="color:#e6db74">     * @param String $word
</span><span style="color:#e6db74">     * @return NULL
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">insert</span>($word) {
        $node <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span>;
        <span style="color:#66d9ef">for</span>($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">strlen</span>($word); $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">if</span>( <span style="color:#f92672">!</span> <span style="color:#a6e22e">isset</span>($node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">child</span>[ $word{$i} ])) {
                $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">child</span>[ $word{$i} ] <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Node</span>();
            }
            
            $node <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>$node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">child</span>[ $word{$i} ];
            
            <span style="color:#66d9ef">if</span>($i <span style="color:#f92672">==</span> <span style="color:#a6e22e">strlen</span>($word)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
                $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">is_end</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
            }
        }
    }
  
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Returns if the word is in the trie.
</span><span style="color:#e6db74">     * @param String $word
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">search</span>($word) {
        $node <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span>;
        <span style="color:#66d9ef">for</span>($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">strlen</span>($word); $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">isset</span>($node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">child</span>[ $word{$i} ])) {
                $node <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>$node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">child</span>[ $word{$i} ];
            } <span style="color:#66d9ef">else</span> {
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
            }
        }
        
        <span style="color:#66d9ef">return</span> $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">is_end</span>;
    }
  
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Returns if there is any word in the trie that starts with the given prefix.
</span><span style="color:#e6db74">     * @param String $prefix
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">startsWith</span>($prefix) {
        $node <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span>;
        <span style="color:#66d9ef">for</span>($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">strlen</span>($prefix); $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">isset</span>($node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">child</span>[ $prefix{$i} ])) {
                $node <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>$node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">child</span>[ $prefix{$i} ];
            } <span style="color:#66d9ef">else</span> {
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
            }
        }
        
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }
}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//数组实现方法
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Trie</span> {
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Initialize your data structure here.
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> __construct() {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span> <span style="color:#f92672">=</span> [];
    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Inserts a word into the trie.
</span><span style="color:#e6db74">     * @param String $word
</span><span style="color:#e6db74">     * @return NULL
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">insert</span>($word) {
        $node <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span>;
        $n <span style="color:#f92672">=</span> <span style="color:#a6e22e">strlen</span>($word);
        $word <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_split</span>($word);
        <span style="color:#66d9ef">foreach</span> ($word <span style="color:#66d9ef">as</span> $index<span style="color:#f92672">=&gt;</span>$char) {
            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isset</span>($node[$char])) $node[$char] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>];
            <span style="color:#66d9ef">if</span> ($index <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> $n) {<span style="color:#75715e">//标识结束
</span><span style="color:#75715e"></span>                $node[$char][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
                <span style="color:#66d9ef">break</span>;
            }
            $node <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>$node[$char];
        }

    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Returns if the word is in the trie.
</span><span style="color:#e6db74">     * @param String $word
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">search</span>($word) {
        $node <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span>;
        $word <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_split</span>($word);
        <span style="color:#66d9ef">foreach</span> ($word <span style="color:#66d9ef">as</span> $char) {
            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isset</span>($node[$char])) {
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
            }
            $node <span style="color:#f92672">=</span> $node[$char];
        }
        <span style="color:#66d9ef">return</span> $node[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>;
    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Returns if there is any word in the trie that starts with the given prefix.
</span><span style="color:#e6db74">     * @param String $prefix
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">startsWith</span>($prefix) {
        $node <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span>;
        $word <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_split</span>($prefix);
        <span style="color:#66d9ef">foreach</span> ($word <span style="color:#66d9ef">as</span> $char) {
            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isset</span>($node[$char])) {
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
            }
            $node <span style="color:#f92672">=</span> $node[$char];
        }
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }
}

<span style="color:#e6db74">/**
</span><span style="color:#e6db74"> * Your Trie object will be instantiated and called as such:
</span><span style="color:#e6db74"> * $obj = Trie();
</span><span style="color:#e6db74"> * $obj-&gt;insert($word);
</span><span style="color:#e6db74"> * $ret_2 = $obj-&gt;search($word);
</span><span style="color:#e6db74"> * $ret_3 = $obj-&gt;startsWith($prefix);
</span><span style="color:#e6db74"> */</span>
</code></pre></div><h4 id="212-单词搜索-iihttpsleetcode-cncomproblemsword-search-ii"><a href="https://leetcode-cn.com/problems/word-search-ii/">212. 单词搜索 II</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TrieNode</span> {
    <span style="color:#66d9ef">public</span> $children <span style="color:#f92672">=</span> [];
    <span style="color:#66d9ef">public</span> $word;
}
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Trie</span> {
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Initialize your data structure here.
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> __construct() {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TrieNode</span>();
    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Inserts a word into the trie.
</span><span style="color:#e6db74">     * @param String $word
</span><span style="color:#e6db74">     * @return NULL
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">insert</span>($word) {
        $node <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span>;
        $n <span style="color:#f92672">=</span> <span style="color:#a6e22e">strlen</span>($word);
        $nword <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_split</span>($word);
        <span style="color:#66d9ef">foreach</span> ($nword <span style="color:#66d9ef">as</span> $char) {
            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>$node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>[$char]) $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>[$char] <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TrieNode</span>();
            $node <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>$node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>[$char];
        }
        $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">word</span> <span style="color:#f92672">=</span> $word;
    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Returns if the word is in the trie.
</span><span style="color:#e6db74">     * @param String $word
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">search</span>($word) {
        $node <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span>;
        $nword <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_split</span>($word);
        <span style="color:#66d9ef">foreach</span> ($nword <span style="color:#66d9ef">as</span> $char) {
            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>$node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>[$char]) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
            $node <span style="color:#f92672">=</span> $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>[$char];
        }
        <span style="color:#66d9ef">return</span> $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">word</span> <span style="color:#f92672">==</span> $word;
    }
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getRoot</span>()
    {
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span>;
    }
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * Returns if there is any word in the trie that starts with the given prefix.
</span><span style="color:#e6db74">     * @param String $prefix
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">startsWith</span>($prefix) {
        $node <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">root</span>;
        $word <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_split</span>($prefix);
        <span style="color:#66d9ef">foreach</span> ($word <span style="color:#66d9ef">as</span> $char) {
            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>$node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>[$char]) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
            $node <span style="color:#f92672">=</span> $node<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>[$char];
        }
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }
}
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {
    <span style="color:#66d9ef">private</span> $res <span style="color:#f92672">=</span> [];
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @param String[][] $board
</span><span style="color:#e6db74">     * @param String[] $words
</span><span style="color:#e6db74">     * @return String[]
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">findWords</span>($board, $words) {
        $trie <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Trie</span>();
        <span style="color:#66d9ef">foreach</span> ($words <span style="color:#66d9ef">as</span> $word) {
            $trie<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">insert</span>($word);
        }
        $n <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($board);
        $m <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($board[<span style="color:#ae81ff">0</span>]);
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $n; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> ($j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $j <span style="color:#f92672">&lt;</span> $m; $j<span style="color:#f92672">++</span>){
                <span style="color:#66d9ef">if</span> ($trie<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">startsWith</span>($board[$i][$j])) {
                    $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">backtracking</span>($board, $i, $j,$n, $m, $trie<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">getRoot</span>());
                }
            }
        }
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">res</span>;
    }

    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">backtracking</span>(<span style="color:#f92672">&amp;</span>$board, $i, $j,$n, $m, <span style="color:#f92672">&amp;</span>$root) 
    {
        $letter <span style="color:#f92672">=</span> $board[$i][$j];
        <span style="color:#66d9ef">if</span> ($letter <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;#&#39;</span>)  <span style="color:#66d9ef">return</span>;
        $board[$i][$j] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;#&#39;</span>;
        $currNode <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>$root<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>[$letter];
        <span style="color:#66d9ef">if</span> ($currNode<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">word</span>) {
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">res</span>[] <span style="color:#f92672">=</span> $currNode<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">word</span>;
            $currNode<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">word</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
        }
        $dx <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
        $dy <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>];
        <span style="color:#66d9ef">for</span> ($k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $k <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; $k<span style="color:#f92672">++</span>) {
            $ni <span style="color:#f92672">=</span> $i <span style="color:#f92672">+</span> $dx[$k];
            $nj <span style="color:#f92672">=</span> $j <span style="color:#f92672">+</span> $dy[$k];
            <span style="color:#66d9ef">if</span> ($ni <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> $ni <span style="color:#f92672">&gt;=</span> $n <span style="color:#f92672">||</span> $nj <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> $nj <span style="color:#f92672">&gt;=</span> $m <span style="color:#f92672">||</span> $board[$ni][$nj] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;#&#39;</span>) <span style="color:#66d9ef">continue</span>;
            <span style="color:#66d9ef">if</span> ($currNode<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">children</span>[$board[$ni][$nj]]) {
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">backtracking</span>($board, $ni, $nj, $n, $m, $currNode);
            }
        }
        $board[$i][$j] <span style="color:#f92672">=</span> $letter;
    }
}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span>:
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">findWords</span>(self, board: List[List[str]], words: List[str]) <span style="color:#f92672">-&gt;</span> List[str]:
        WORD_KEY <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;$&#39;</span>
        
        trie <span style="color:#f92672">=</span> {}
        <span style="color:#66d9ef">for</span> word <span style="color:#f92672">in</span> words:
            node <span style="color:#f92672">=</span> trie
            <span style="color:#66d9ef">for</span> letter <span style="color:#f92672">in</span> word:
                <span style="color:#75715e"># retrieve the next node; If not found, create a empty node.</span>
                node <span style="color:#f92672">=</span> node<span style="color:#f92672">.</span>setdefault(letter, {})
            <span style="color:#75715e"># mark the existence of a word in trie node</span>
            node[WORD_KEY] <span style="color:#f92672">=</span> word
        
        rowNum <span style="color:#f92672">=</span> len(board)
        colNum <span style="color:#f92672">=</span> len(board[<span style="color:#ae81ff">0</span>])
        
        matchedWords <span style="color:#f92672">=</span> []
        
        <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">backtracking</span>(row, col, parent):    
            
            letter <span style="color:#f92672">=</span> board[row][col]
            currNode <span style="color:#f92672">=</span> parent[letter]
            
            <span style="color:#75715e"># check if we find a match of word</span>
            word_match <span style="color:#f92672">=</span> currNode<span style="color:#f92672">.</span>pop(WORD_KEY, <span style="color:#66d9ef">False</span>)
            <span style="color:#66d9ef">if</span> word_match:
                <span style="color:#75715e"># also we removed the matched word to avoid duplicates,</span>
                <span style="color:#75715e">#   as well as avoiding using set() for results.</span>
                matchedWords<span style="color:#f92672">.</span>append(word_match)
            
            <span style="color:#75715e"># Before the EXPLORATION, mark the cell as visited </span>
            board[row][col] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;#&#39;</span>
            
            <span style="color:#75715e"># Explore the neighbors in 4 directions, i.e. up, right, down, left</span>
            <span style="color:#66d9ef">for</span> (rowOffset, colOffset) <span style="color:#f92672">in</span> [(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>), (<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>), (<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)]:
                newRow, newCol <span style="color:#f92672">=</span> row <span style="color:#f92672">+</span> rowOffset, col <span style="color:#f92672">+</span> colOffset     
                <span style="color:#66d9ef">if</span> newRow <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> newRow <span style="color:#f92672">&gt;=</span> rowNum <span style="color:#f92672">or</span> newCol <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> newCol <span style="color:#f92672">&gt;=</span> colNum:
                    <span style="color:#66d9ef">continue</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> board[newRow][newCol] <span style="color:#f92672">in</span> currNode:
                    <span style="color:#66d9ef">continue</span>
                backtracking(newRow, newCol, currNode)
        
            <span style="color:#75715e"># End of EXPLORATION, we restore the cell</span>
            board[row][col] <span style="color:#f92672">=</span> letter
        
            <span style="color:#75715e"># Optimization: incrementally remove the matched leaf node in Trie.</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> currNode:
                parent<span style="color:#f92672">.</span>pop(letter)

        <span style="color:#66d9ef">for</span> row <span style="color:#f92672">in</span> range(rowNum):
            <span style="color:#66d9ef">for</span> col <span style="color:#f92672">in</span> range(colNum):
                <span style="color:#75715e"># starting from each of the cells</span>
                <span style="color:#66d9ef">if</span> board[row][col] <span style="color:#f92672">in</span> trie:
                    backtracking(row, col, trie)
        
        <span style="color:#66d9ef">return</span> matchedWords    
</code></pre></div><h4 id="分析单词搜索-2-用-tire-树方式实现的时间复杂度">分析单词搜索 2 用 Tire 树方式实现的时间复杂度</h4>
<p>请同学们提交在第 7 周的学习总结中。</p>
<h2 id="3-并查集的基本实现特性和实战题目解析">3. 并查集的基本实现、特性和实战题目解析</h2>
<h3 id="参考链接-1">参考链接</h3>
<p>####<a href="https://leetcode-cn.com/problems/number-of-islands/">200. 岛屿数量</a></p>
<h4 id="并查集代码模板httpsshimoimdocsydpch33xdhk9ywwr"><a href="https://shimo.im/docs/ydPCH33xDhK9YwWR">并查集代码模板</a></h4>
<p><strong>Java 模板</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UnionFind</span> <span style="color:#f92672">{</span> 
	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> 
	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> parent<span style="color:#f92672">;</span> 
	<span style="color:#66d9ef">public</span> <span style="color:#a6e22e">UnionFind</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> 
		count <span style="color:#f92672">=</span> n<span style="color:#f92672">;</span> 
		parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>n<span style="color:#f92672">];</span> 
		<span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> n<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span> 
			parent<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
		<span style="color:#f92672">}</span>
	<span style="color:#f92672">}</span> 
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">find</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> 
		<span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> parent<span style="color:#f92672">[</span>p<span style="color:#f92672">])</span> <span style="color:#f92672">{</span> 
			parent<span style="color:#f92672">[</span>p<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> parent<span style="color:#f92672">[</span>parent<span style="color:#f92672">[</span>p<span style="color:#f92672">]];</span> 
			p <span style="color:#f92672">=</span> parent<span style="color:#f92672">[</span>p<span style="color:#f92672">];</span> 
		<span style="color:#f92672">}</span>
		<span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span> 
	<span style="color:#f92672">}</span>
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">union</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> p<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> q<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> 
		<span style="color:#66d9ef">int</span> rootP <span style="color:#f92672">=</span> find<span style="color:#f92672">(</span>p<span style="color:#f92672">);</span> 
		<span style="color:#66d9ef">int</span> rootQ <span style="color:#f92672">=</span> find<span style="color:#f92672">(</span>q<span style="color:#f92672">);</span> 
		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>rootP <span style="color:#f92672">==</span> rootQ<span style="color:#f92672">)</span> <span style="color:#66d9ef">return</span><span style="color:#f92672">;</span> 
		parent<span style="color:#f92672">[</span>rootP<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> rootQ<span style="color:#f92672">;</span> 
		count<span style="color:#f92672">--;</span>
	<span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>Python 模板</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">init</span>(p): 
	<span style="color:#75715e"># for i = 0 .. n: p[i] = i; </span>
	p <span style="color:#f92672">=</span> [i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n)] 
 
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">union</span>(self, p, i, j): 
	p1 <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>parent(p, i) 
	p2 <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>parent(p, j) 
	p[p1] <span style="color:#f92672">=</span> p2 
 
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">parent</span>(self, p, i): 
	root <span style="color:#f92672">=</span> i 
	<span style="color:#66d9ef">while</span> p[root] <span style="color:#f92672">!=</span> root: 
		root <span style="color:#f92672">=</span> p[root] 
	<span style="color:#66d9ef">while</span> p[i] <span style="color:#f92672">!=</span> i: <span style="color:#75715e"># 路径压缩 ?</span>
		x <span style="color:#f92672">=</span> i; i <span style="color:#f92672">=</span> p[i]; p[x] <span style="color:#f92672">=</span> root 
	<span style="color:#66d9ef">return</span> root
</code></pre></div><h3 id="实战题目">实战题目</h3>
<h4 id="547-朋友圈httpsleetcode-cncomproblemsfriend-circles"><a href="https://leetcode-cn.com/problems/friend-circles/">547. 朋友圈</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span>
{

    <span style="color:#66d9ef">private</span> $parent <span style="color:#f92672">=</span> [];
    <span style="color:#66d9ef">private</span> $rank <span style="color:#f92672">=</span> [];
    <span style="color:#66d9ef">private</span> $count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">find</span>(<span style="color:#a6e22e">int</span> $i)
    {
        <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$i] <span style="color:#f92672">!=</span> $i) {
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$i] <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">find</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$i]);
        }
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$i];
    }

    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">union</span>($x, $y)
    {
        $rootX <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">find</span>($x);
        $rootY <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">find</span>($y);
        <span style="color:#66d9ef">if</span> ($rootX <span style="color:#f92672">!=</span> $rootY) {
            <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$rootX] <span style="color:#f92672">&gt;</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$rootY]) {
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$rootY] <span style="color:#f92672">=</span> $rootX;
            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$rootX] <span style="color:#f92672">&lt;</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$rootY]) {
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$rootX] <span style="color:#f92672">=</span> $rootY;
            } <span style="color:#66d9ef">else</span> {
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$rootY] <span style="color:#f92672">=</span> $rootX;
                $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$rootX] <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>;
            }
            <span style="color:#f92672">--</span>$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">count</span>;
        }
    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @param String[][] $grid
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">findCircleNum</span>($grid)
    {
        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">empty</span>($grid) <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>$grid[<span style="color:#ae81ff">0</span>]) <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
        $m <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">count</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($grid);
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $m; <span style="color:#f92672">++</span>$i) {
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$i] <span style="color:#f92672">=</span> $i;
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$i] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        }
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $m; <span style="color:#f92672">++</span>$i) {
            <span style="color:#66d9ef">for</span> ($j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $j <span style="color:#f92672">&lt;</span> $m; <span style="color:#f92672">++</span>$j) {
                <span style="color:#66d9ef">if</span> ($grid[$i][$j] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> $i <span style="color:#f92672">!=</span> $j) {
                    $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">union</span>($i, $j);       
                }
            }
        }
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">count</span>;
    }
}
</code></pre></div><h4 id="200-岛屿数量httpsleetcode-cncomproblemsnumber-of-islands"><a href="https://leetcode-cn.com/problems/number-of-islands/">200. 岛屿数量</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#e6db74">/**
</span><span style="color:#e6db74"> * 上面的注释是为了直接提交leetcode
</span><span style="color:#e6db74"> * @lc app=leetcode.cn id=200 lang=php
</span><span style="color:#e6db74"> * @author 刘兵兵 &lt;lbbniu@gmail.com&gt;
</span><span style="color:#e6db74"> * 200. 岛屿数量
</span><span style="color:#e6db74"> * 链接：https://leetcode-cn.com/problems/number-of-islands/
</span><span style="color:#e6db74"> */</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * dfs
</span><span style="color:#e6db74">     * @param String[][] $grid
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">numIslands</span>($grid) {
        $n <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($grid);
        <span style="color:#66d9ef">if</span> ($n <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
        $m <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($grid[<span style="color:#ae81ff">0</span>]);
        $count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $n; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> ($j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $j <span style="color:#f92672">&lt;</span> $m; $j<span style="color:#f92672">++</span>) {
                <span style="color:#66d9ef">if</span> ($grid[$i][$j] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) {
                    $count<span style="color:#f92672">++</span>;
                    $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">bfs</span>($grid, $i, $j, $n, $m);
                }
            }
        }
        <span style="color:#66d9ef">return</span> $count;
    }

    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">dfs</span>(<span style="color:#f92672">&amp;</span>$grid, $i, $j, $n, $m)
    {
        <span style="color:#66d9ef">if</span> ($i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> $i <span style="color:#f92672">&gt;=</span> $n <span style="color:#f92672">||</span> $j <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> $j <span style="color:#f92672">&gt;=</span> $m <span style="color:#f92672">||</span> $grid[$i][$j] <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">return</span>;
        $grid[$i][$j] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">dfs</span>($grid, $i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, $j, $n, $m);
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">dfs</span>($grid, $i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, $j, $n, $m);
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">dfs</span>($grid, $i, $j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, $n, $m);
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">dfs</span>($grid, $i, $j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, $n, $m);
    }

    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">bfs</span> (<span style="color:#f92672">&amp;</span>$grid, $i, $j, $n, $m) {
        $dx <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
        $dy <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>];
        $queue <span style="color:#f92672">=</span> [[$i, $j]];
        $grid[$i][$j] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">while</span> ($queue) {
            [$i, $j] <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_shift</span>($queue);
            <span style="color:#66d9ef">for</span> ($k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $k <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; $k<span style="color:#f92672">++</span>) {
                $ni <span style="color:#f92672">=</span> $i <span style="color:#f92672">+</span> $dx[$k];
                $nj <span style="color:#f92672">=</span> $j <span style="color:#f92672">+</span> $dy[$k];
                <span style="color:#66d9ef">if</span> ($ni <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> $ni <span style="color:#f92672">&lt;</span> $n <span style="color:#f92672">&amp;&amp;</span> $nj <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> $nj <span style="color:#f92672">&lt;</span> $m <span style="color:#f92672">&amp;&amp;</span> $grid[$ni][$nj] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) {
                    $queue[] <span style="color:#f92672">=</span> [$ni, $nj];
                    $grid[$ni][$nj] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
                } 
            }
        }
    }
}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UnionFind</span> {
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    UnionFind(vector<span style="color:#f92672">&lt;</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">char</span><span style="color:#f92672">&gt;&gt;&amp;</span> grid) {
        count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> grid.size();
        <span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> grid[<span style="color:#ae81ff">0</span>].size();
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> m; <span style="color:#f92672">++</span>i) {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> n; <span style="color:#f92672">++</span>j) {
                <span style="color:#66d9ef">if</span> (grid[i][j] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;1&#39;</span>) {
                    parent.push_back(i <span style="color:#f92672">*</span> n <span style="color:#f92672">+</span> j);
                    <span style="color:#f92672">++</span>count;
                }
                <span style="color:#66d9ef">else</span> {
                    parent.push_back(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);
                }
                rank.push_back(<span style="color:#ae81ff">0</span>);
            }
        }
    }

    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">find</span>(<span style="color:#66d9ef">int</span> i) {
        <span style="color:#66d9ef">if</span> (parent[i] <span style="color:#f92672">!=</span> i) {
            parent[i] <span style="color:#f92672">=</span> find(parent[i]);
        }
        <span style="color:#66d9ef">return</span> parent[i];
    }

    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">unite</span>(<span style="color:#66d9ef">int</span> x, <span style="color:#66d9ef">int</span> y) {
        <span style="color:#66d9ef">int</span> rootx <span style="color:#f92672">=</span> find(x);
        <span style="color:#66d9ef">int</span> rooty <span style="color:#f92672">=</span> find(y);
        <span style="color:#66d9ef">if</span> (rootx <span style="color:#f92672">!=</span> rooty) {
            <span style="color:#66d9ef">if</span> (rank[rootx] <span style="color:#f92672">&lt;</span> rank[rooty]) {
                swap(rootx, rooty);
            }
            parent[rooty] <span style="color:#f92672">=</span> rootx;
            <span style="color:#66d9ef">if</span> (rank[rootx] <span style="color:#f92672">==</span> rank[rooty]) rank[rootx] <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>;
            <span style="color:#f92672">--</span>count;
        }
    }

    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getCount</span>() <span style="color:#66d9ef">const</span> {
        <span style="color:#66d9ef">return</span> count;
    }

<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
    vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> parent;
    vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> rank;
    <span style="color:#66d9ef">int</span> count;
};

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    <span style="color:#66d9ef">int</span> numIslands(vector<span style="color:#f92672">&lt;</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">char</span><span style="color:#f92672">&gt;&gt;&amp;</span> grid) {
        <span style="color:#66d9ef">int</span> nr <span style="color:#f92672">=</span> grid.size();
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>nr) <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">int</span> nc <span style="color:#f92672">=</span> grid[<span style="color:#ae81ff">0</span>].size();

        UnionFind <span style="color:#a6e22e">uf</span>(grid);
        <span style="color:#66d9ef">int</span> num_islands <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> r <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; r <span style="color:#f92672">&lt;</span> nr; <span style="color:#f92672">++</span>r) {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> c <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; c <span style="color:#f92672">&lt;</span> nc; <span style="color:#f92672">++</span>c) {
                <span style="color:#66d9ef">if</span> (grid[r][c] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;1&#39;</span>) {
                    grid[r][c] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0&#39;</span>;
                    <span style="color:#66d9ef">if</span> (r <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> grid[r<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][c] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;1&#39;</span>) uf.unite(r <span style="color:#f92672">*</span> nc <span style="color:#f92672">+</span> c, (r<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) <span style="color:#f92672">*</span> nc <span style="color:#f92672">+</span> c);
                    <span style="color:#66d9ef">if</span> (r <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span> nr <span style="color:#f92672">&amp;&amp;</span> grid[r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][c] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;1&#39;</span>) uf.unite(r <span style="color:#f92672">*</span> nc <span style="color:#f92672">+</span> c, (r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>) <span style="color:#f92672">*</span> nc <span style="color:#f92672">+</span> c);
                    <span style="color:#66d9ef">if</span> (c <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> grid[r][c<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;1&#39;</span>) uf.unite(r <span style="color:#f92672">*</span> nc <span style="color:#f92672">+</span> c, r <span style="color:#f92672">*</span> nc <span style="color:#f92672">+</span> c <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>);
                    <span style="color:#66d9ef">if</span> (c <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span> nc <span style="color:#f92672">&amp;&amp;</span> grid[r][c<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;1&#39;</span>) uf.unite(r <span style="color:#f92672">*</span> nc <span style="color:#f92672">+</span> c, r <span style="color:#f92672">*</span> nc <span style="color:#f92672">+</span> c <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                }
            }
        }

        <span style="color:#66d9ef">return</span> uf.getCount();
    }
};
</code></pre></div><h4 id="130-被围绕的区域httpsleetcode-cncomproblemssurrounded-regions"><a href="https://leetcode-cn.com/problems/surrounded-regions/">130. 被围绕的区域</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @param String[][] $board
</span><span style="color:#e6db74">     * @return NULL
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">solve</span>(<span style="color:#f92672">&amp;</span>$board) {
		$n <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($board);
        $m <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($board[<span style="color:#ae81ff">0</span>]);
        <span style="color:#75715e">//替换边缘节点为#
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $n; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> ($j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $j <span style="color:#f92672">&lt;</span> $m; $j<span style="color:#f92672">++</span>) {
                $isEdge <span style="color:#f92672">=</span> $i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> $j <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> $i <span style="color:#f92672">==</span> $n <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">||</span> $j <span style="color:#f92672">==</span> $m <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
                <span style="color:#66d9ef">if</span> ($isEdge <span style="color:#f92672">&amp;&amp;</span> $board[$i][$j] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;O&#39;</span>) {
                    $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">dfs</span>($board, $i, $j, $n, $m);
                }
            }
        }
        <span style="color:#75715e">//填充
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $n; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> ($j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $j <span style="color:#f92672">&lt;</span> $m; $j<span style="color:#f92672">++</span>) {
                <span style="color:#66d9ef">if</span> ($board[$i][$j] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;O&#39;</span>) {
                    $board[$i][$j] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;X&#39;</span>;
                } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> ($board[$i][$j] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;#&#39;</span>){
                    $board[$i][$j] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;O&#39;</span>;
                }
            }
        }
    }
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">dfs</span>(<span style="color:#f92672">&amp;</span>$board, $i, $j, $n, $m) {
        <span style="color:#66d9ef">if</span> ($i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> $i <span style="color:#f92672">&gt;=</span> $n <span style="color:#f92672">||</span> $j <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> $j <span style="color:#f92672">&gt;=</span> $m <span style="color:#f92672">||</span> $board[$i][$j] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;X&#39;</span> <span style="color:#f92672">||</span> 
           $board[$i][$j] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;#&#39;</span>) <span style="color:#66d9ef">return</span>;
        $board[$i][$j] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;#&#39;</span>;
        $dx <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
        $dy <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>];
        $queue <span style="color:#f92672">=</span> [[$i, $j]];
        $grid[$i][$j] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">for</span> ($k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $k <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>; $k<span style="color:#f92672">++</span>) {
            $ni <span style="color:#f92672">=</span> $i <span style="color:#f92672">+</span> $dx[$k];
            $nj <span style="color:#f92672">=</span> $j <span style="color:#f92672">+</span> $dy[$k];
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">dfs</span>($board, $ni, $nj, $n, $m);
        }
    }
}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UF1</span>
{
	<span style="color:#66d9ef">private</span> $id <span style="color:#f92672">=</span> [];     <span style="color:#75715e">// id[i] = parent of i
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">private</span> $rank <span style="color:#f92672">=</span> [];  <span style="color:#75715e">// rank[i] = rank of subtree rooted at i (cannot be more than 31)
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">private</span> $count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;    <span style="color:#75715e">// number of components
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> __construct($N)
	{
		$count <span style="color:#f92672">=</span> $N;
		<span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $N; $i<span style="color:#f92672">++</span>) {
			$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">id</span>[$i] <span style="color:#f92672">=</span> $i;
			$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$i] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
		}
	}
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">find</span>($p) {
		<span style="color:#66d9ef">while</span> ($p <span style="color:#f92672">!=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">id</span>[$p]) {
			$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">id</span>[$p] <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">id</span>[$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">id</span>[$p]];    <span style="color:#75715e">// path compression by halving
</span><span style="color:#75715e"></span>			$p <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">id</span>[$p];
		}
		<span style="color:#66d9ef">return</span> $p;
	}
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getCount</span>() {
		<span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">count</span>;
	}
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">connected</span>($p, $q) {
		<span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">find</span>($p) <span style="color:#f92672">==</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">find</span>($q);
	}
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">connect</span>($p, $q) {
		$i <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">find</span>($p);
		$j <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">find</span>($q);
		<span style="color:#66d9ef">if</span> ($i <span style="color:#f92672">==</span> $j) <span style="color:#66d9ef">return</span>;
		<span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$i] <span style="color:#f92672">&lt;</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$j]) $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">id</span>[$i] <span style="color:#f92672">=</span> $j;
		<span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$i] <span style="color:#f92672">&gt;</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$j]) $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">id</span>[$j] <span style="color:#f92672">=</span> $i;
		<span style="color:#66d9ef">else</span> {
			$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">id</span>[$j] <span style="color:#f92672">=</span> $i;
			$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">rank</span>[$i]<span style="color:#f92672">++</span>;
		}
		$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">count</span><span style="color:#f92672">--</span>;
	}
}
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UF</span> {
    <span style="color:#66d9ef">private</span> $parent <span style="color:#f92672">=</span> [];
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> __construct($m)
    {
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $m; $i<span style="color:#f92672">++</span>) {
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$i] <span style="color:#f92672">=</span> $i; 
        }
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">connect</span>($x, $y) {
        $rootx <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">find</span>($x);
        $rooty <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">find</span>($y);
        <span style="color:#66d9ef">if</span> ($rootx <span style="color:#f92672">!=</span> $rooty) {
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$rootx] <span style="color:#f92672">=</span> $rooty;
        }
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">find</span>($x) {
        <span style="color:#66d9ef">while</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$x] <span style="color:#f92672">!=</span> $x) {
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$x] <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$x]];
            $x <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$x];
        }
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">parent</span>[$x];
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isConnected</span>($x, $y) {
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">find</span>($x) <span style="color:#f92672">==</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">find</span>($y);
    }
}
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">solve</span>(<span style="color:#f92672">&amp;</span>$board) {
        $n <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($board);
        <span style="color:#66d9ef">if</span>($n<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>)    <span style="color:#66d9ef">return</span>;
        $m <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($board[<span style="color:#ae81ff">0</span>]);
        $uf <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">UF</span>($n <span style="color:#f92672">*</span> $m <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
        <span style="color:#66d9ef">for</span>($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i<span style="color:#f92672">&lt;</span>$n; $i<span style="color:#f92672">++</span>){
            <span style="color:#66d9ef">for</span>($j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $j <span style="color:#f92672">&lt;</span> $m; $j<span style="color:#f92672">++</span>){
                <span style="color:#66d9ef">if</span>(($i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">||</span>$i <span style="color:#f92672">==</span> $n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">||</span> $j <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">||</span> $j <span style="color:#f92672">==</span> $m <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">&amp;&amp;</span> $board[$i][$j]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;O&#39;</span>) <span style="color:#75715e">// if a &#39;O&#39; node is on the boundry, connect it to the dummy node
</span><span style="color:#75715e"></span>                    $uf<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">connect</span>($i<span style="color:#f92672">*</span>$m<span style="color:#f92672">+</span>$j,$n<span style="color:#f92672">*</span>$m);
                <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>($board[$i][$j]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;O&#39;</span>) <span style="color:#75715e">// connect a &#39;O&#39; node to its neighbour &#39;O&#39; nodes
</span><span style="color:#75715e"></span>                {
                    <span style="color:#66d9ef">if</span>($board[$i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>][$j]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;O&#39;</span>)
                        $uf<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">connect</span>($i<span style="color:#f92672">*</span>$m<span style="color:#f92672">+</span>$j,($i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">*</span>$m<span style="color:#f92672">+</span>$j);
                    <span style="color:#66d9ef">if</span>($board[$i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>][$j]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;O&#39;</span>)
                        $uf<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">connect</span>($i<span style="color:#f92672">*</span>$m<span style="color:#f92672">+</span>$j,($i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">*</span>$m<span style="color:#f92672">+</span>$j);
                    <span style="color:#66d9ef">if</span>($board[<span style="color:#a6e22e">i</span>][<span style="color:#a6e22e">j</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;O&#39;</span>)
                        $uf<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">connect</span>($i<span style="color:#f92672">*</span>$m<span style="color:#f92672">+</span>$j,$i<span style="color:#f92672">*</span>$m<span style="color:#f92672">+</span>$j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);
                    <span style="color:#66d9ef">if</span>($board[<span style="color:#a6e22e">i</span>][<span style="color:#a6e22e">j</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;O&#39;</span>)
                        $uf<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">connect</span>($i<span style="color:#f92672">*</span>$m<span style="color:#f92672">+</span>$j,$i<span style="color:#f92672">*</span>$m<span style="color:#f92672">+</span>$j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);
                }
            }
        }
        
        <span style="color:#66d9ef">for</span>($i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;$i<span style="color:#f92672">&lt;</span>$n;$i<span style="color:#f92672">++</span>){
            <span style="color:#66d9ef">for</span>($j<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;$j<span style="color:#f92672">&lt;</span>$m;$j<span style="color:#f92672">++</span>){
                <span style="color:#66d9ef">if</span>(<span style="color:#f92672">!</span>$uf<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">isConnected</span>($i<span style="color:#f92672">*</span>$m<span style="color:#f92672">+</span>$j,$n<span style="color:#f92672">*</span>$m)){ <span style="color:#75715e">// if a &#39;O&#39; node is not connected to the dummy node, it is captured
</span><span style="color:#75715e"></span>                    $board[$i][$j]<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;X&#39;</span>;
                }
            }
        }
    }
}
</code></pre></div><h1 id="第7周-第14课高级搜索">第7周 第14课｜高级搜索</h1>
<h2 id="1-剪枝的实现和特性">1. 剪枝的实现和特性</h2>
<h3 id="参考链接-2">参考链接</h3>
<h4 id="dfs-代码模板httpshimoimdocsddgwcccjqkxkrctq"><a href="http://shimo.im/docs/ddgwCccJQKxkrcTq/">DFS 代码模板</a></h4>
<p><strong>递归写法</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">visited <span style="color:#f92672">=</span> set() 

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dfs</span>(node, visited):
    <span style="color:#66d9ef">if</span> node <span style="color:#f92672">in</span> visited: <span style="color:#75715e"># terminator</span>
    	<span style="color:#75715e"># already visited </span>
    	<span style="color:#66d9ef">return</span> 

	visited<span style="color:#f92672">.</span>add(node) 

	<span style="color:#75715e"># process current node here. </span>
	<span style="color:#f92672">...</span>
	<span style="color:#66d9ef">for</span> next_node <span style="color:#f92672">in</span> node<span style="color:#f92672">.</span>children(): 
		<span style="color:#66d9ef">if</span> next_node <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> visited: 
			dfs(next_node, visited)
</code></pre></div><p><strong>非递归写法</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">DFS</span>(self, tree): 

	<span style="color:#66d9ef">if</span> tree<span style="color:#f92672">.</span>root <span style="color:#f92672">is</span> <span style="color:#66d9ef">None</span>: 
		<span style="color:#66d9ef">return</span> [] 

	visited, stack <span style="color:#f92672">=</span> [], [tree<span style="color:#f92672">.</span>root]

	<span style="color:#66d9ef">while</span> stack: 
		node <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span>pop() 
		visited<span style="color:#f92672">.</span>add(node)

		process (node) 
		nodes <span style="color:#f92672">=</span> generate_related_nodes(node) 
		stack<span style="color:#f92672">.</span>push(nodes) 

	<span style="color:#75715e"># other processing work </span>
	<span style="color:#f92672">...</span>
</code></pre></div><h4 id="bfs-代码模板httpshimoimdocsp8tqkhgkt3ytkyyd"><a href="http://shimo.im/docs/P8TqKHGKt3ytkYYd/">BFS 代码模板</a></h4>
<h4 id="alphazero-explainedhttpsnikcheerlagithubiodeeplearningschool20180101alphazero-explained"><a href="https://nikcheerla.github.io/deeplearningschool/2018/01/01/AlphaZero-Explained/">AlphaZero Explained</a></h4>
<h4 id="棋类复杂度httpsenwikipediaorgwikigame_complexity"><a href="https://en.wikipedia.org/wiki/Game_complexity">棋类复杂度</a></h4>
<h2 id="2剪枝实战题目解析数独">2.剪枝实战题目解析：数独</h2>
<h3 id="实战题目-1">实战题目</h3>
<h4 id="70-爬楼梯httpsleetcode-cncomproblemsclimbing-stairs"><a href="https://leetcode-cn.com/problems/climbing-stairs/">70. 爬楼梯</a></h4>
<h4 id="22-括号生成httpsleetcode-cncomproblemsgenerate-parentheses"><a href="https://leetcode-cn.com/problems/generate-parentheses/">22. 括号生成</a></h4>
<h4 id="51-n皇后httpsleetcode-cncomproblemsn-queens"><a href="https://leetcode-cn.com/problems/n-queens/">51. N皇后</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#66d9ef">private</span> $col <span style="color:#f92672">=</span> [];
    <span style="color:#66d9ef">private</span> $pie <span style="color:#f92672">=</span> [];
    <span style="color:#66d9ef">private</span> $na <span style="color:#f92672">=</span> [];
    <span style="color:#66d9ef">private</span> $res <span style="color:#f92672">=</span> [];
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @param Integer $n
</span><span style="color:#e6db74">     * @return String[][]
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">solveNQueens</span>($n) {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">dfs</span>($n, <span style="color:#ae81ff">0</span>, []);
        <span style="color:#66d9ef">return</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">res</span>;
    }
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">dfs</span>($n, $row, $curr_state) {
        <span style="color:#66d9ef">if</span> ($n <span style="color:#f92672">==</span> $row) {
            $res <span style="color:#f92672">=</span> [];
            <span style="color:#66d9ef">foreach</span> ($curr_state <span style="color:#66d9ef">as</span> $col) {
                $res[] <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_pad</span>(<span style="color:#e6db74">&#39;&#39;</span>, $col, <span style="color:#e6db74">&#39;.&#39;</span>) <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;Q&#39;</span> <span style="color:#f92672">.</span> <span style="color:#a6e22e">str_pad</span>(<span style="color:#e6db74">&#39;&#39;</span>, $n <span style="color:#f92672">-</span> $col <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;.&#39;</span>);
            }
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">res</span>[] <span style="color:#f92672">=</span> $res;
            <span style="color:#66d9ef">return</span>;
        }
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $n; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">col</span>[$i] <span style="color:#f92672">||</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">pie</span>[$row <span style="color:#f92672">+</span> $i] <span style="color:#f92672">||</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">na</span>[$row <span style="color:#f92672">-</span> $i]) <span style="color:#66d9ef">continue</span>;
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">col</span>[$i] <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">pie</span>[$row <span style="color:#f92672">+</span> $i] <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">na</span>[$row <span style="color:#f92672">-</span> $i] <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
            $curr_state[] <span style="color:#f92672">=</span> $i;
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">dfs</span>($n, $row <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, $curr_state);
            <span style="color:#a6e22e">array_pop</span>($curr_state);
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">col</span>[$i] <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">pie</span>[$row <span style="color:#f92672">+</span> $i] <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
            $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">na</span>[$row <span style="color:#f92672">-</span> $i] <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
        }
    }
}
</code></pre></div><h4 id="36-有效的数独httpsleetcode-cncomproblemsvalid-sudoku"><a href="https://leetcode-cn.com/problems/valid-sudoku/">36. 有效的数独</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @param String[][] $board
</span><span style="color:#e6db74">     * @return Boolean
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isValidSudoku</span>($board) {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">count</span>($board) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">9</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">count</span>($board[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">9</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
        $rows <span style="color:#f92672">=</span> $colunms <span style="color:#f92672">=</span> $blocks <span style="color:#f92672">=</span> [];
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">9</span>; $i<span style="color:#f92672">++</span>) {
            $rows[$i] <span style="color:#f92672">=</span> [];
            $colunms[$i] <span style="color:#f92672">=</span> [];
            $blocks[$i] <span style="color:#f92672">=</span> [];
        }
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">9</span>; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> ($j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $j <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">9</span>; $j<span style="color:#f92672">++</span>) {
                <span style="color:#66d9ef">if</span> ($board[$i][$j] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;.&#39;</span>) {
                    $num <span style="color:#f92672">=</span> $board[$i][$j];
                    $b_index <span style="color:#f92672">=</span> <span style="color:#a6e22e">intval</span>($i <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">intval</span>($j <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>);
                    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isset</span>($rows[$i][$num]) 
                    <span style="color:#f92672">||</span> <span style="color:#a6e22e">isset</span>($colunms[$j][$num]) 
                    <span style="color:#f92672">||</span> <span style="color:#a6e22e">isset</span>($blocks[$b_index][$num])) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
                    $rows[$i][$num] <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
                    $colunms[$j][$num] <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
                    $blocks[$b_index][$num] <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
                }
            }
        }
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }
}
</code></pre></div><h4 id="37-解数独httpsleetcode-cncomproblemssudoku-solver"><a href="https://leetcode-cn.com/problems/sudoku-solver/">37. 解数独</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @param String[][] $board
</span><span style="color:#e6db74">     * @return NULL
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">solveSudoku</span>(<span style="color:#f92672">&amp;</span>$board) {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">count</span>($board) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">9</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">count</span>($board[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">9</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
        <span style="color:#75715e">//初始化
</span><span style="color:#75715e"></span>        $rows <span style="color:#f92672">=</span> $columns <span style="color:#f92672">=</span> $blocks <span style="color:#f92672">=</span> [];
        $nums <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_flip</span>(<span style="color:#a6e22e">range</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">9</span>));
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">9</span>; $i<span style="color:#f92672">++</span>) {
            $rows[$i] <span style="color:#f92672">=</span> $nums;
            $columns[$i] <span style="color:#f92672">=</span> $nums;
            $blocks[$i] <span style="color:#f92672">=</span> $nums;
        }
        <span style="color:#75715e">//收集需要填数的位置
</span><span style="color:#75715e"></span>        $empty <span style="color:#f92672">=</span> [];
        <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">9</span>; $i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> ($j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $j <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">9</span>; $j<span style="color:#f92672">++</span>) {
                <span style="color:#66d9ef">if</span> ($board[$i][$j] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;.&#39;</span>) {
                    $num <span style="color:#f92672">=</span> $board[$i][$j];
                    $b <span style="color:#f92672">=</span> <span style="color:#a6e22e">intval</span>($i <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">intval</span>($j <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>);
                    <span style="color:#a6e22e">unset</span>($rows[$i][$num], $columns[$j][$num], $blocks[$b][$num]);
                } <span style="color:#66d9ef">else</span> {
                    $empty[] <span style="color:#f92672">=</span> [$i, $j];
                }
            }
        }
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">backtrack</span>($board, $empty, $rows, $columns, $blocks);
    }

    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">backtrack</span>(<span style="color:#f92672">&amp;</span>$board, $empty, $rows, $columns, $blocks, $index <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
    {
        <span style="color:#66d9ef">if</span> ($index <span style="color:#f92672">==</span> <span style="color:#a6e22e">count</span>($empty)) {
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
        }
        [$i, $j] <span style="color:#f92672">=</span> $empty[$index];
        $b <span style="color:#f92672">=</span> <span style="color:#a6e22e">intval</span>($i <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">intval</span>($j <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>);
        $nums <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_intersect</span>(<span style="color:#a6e22e">array_keys</span>($rows[$i]), <span style="color:#a6e22e">array_keys</span>($columns[$j]), <span style="color:#a6e22e">array_keys</span>($blocks[$b]));
        <span style="color:#66d9ef">foreach</span> ($nums <span style="color:#66d9ef">as</span> $num) {
            <span style="color:#a6e22e">unset</span>($rows[$i][$num], $columns[$j][$num], $blocks[$b][$num]);
            $board[$i][$j] <span style="color:#f92672">=</span> (<span style="color:#a6e22e">string</span>)$num;
            <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">backtrack</span>($board, $empty, $rows, $columns, $blocks, $index <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>))
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
            $rows[$i][$num] <span style="color:#f92672">=</span> $num;
            $columns[$j][$num] <span style="color:#f92672">=</span> $num;
            $blocks[$b][$num] <span style="color:#f92672">=</span> $num;
        }
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
    }
}
</code></pre></div><h2 id="3-双向bfs的实现特性和题解">3. 双向BFS的实现、特性和题解</h2>
<h3 id="实战题目-2">实战题目</h3>
<h4 id="127-单词接龙httpsleetcode-cncomproblemsword-ladder"><a href="https://leetcode-cn.com/problems/word-ladder/">127. 单词接龙</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 双bfs
</span><span style="color:#e6db74">     * @param String $beginWord
</span><span style="color:#e6db74">     * @param String $endWord
</span><span style="color:#e6db74">     * @param String[] $wordList
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">ladderLength</span>($beginWord, $endWord, $wordList) {
        $wordList <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_flip</span>($wordList);
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isset</span>($wordList[$endWord])) <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
        $queue1 <span style="color:#f92672">=</span> [$beginWord];
        $queue2 <span style="color:#f92672">=</span> [$endWord];
        $visited <span style="color:#f92672">=</span> [];
        $visited[$beginWord] <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
        $n <span style="color:#f92672">=</span> <span style="color:#a6e22e">strlen</span>($beginWord);
        $step <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">while</span>($queue1) {
            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">count</span>($queue1) <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">count</span>($queue2)) [$queue1, $queue2] <span style="color:#f92672">=</span> [$queue2, $queue1];
            $step<span style="color:#f92672">++</span>;
            $size <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($queue1);
            $h2 <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_flip</span>($queue2);
            <span style="color:#66d9ef">while</span> ($size<span style="color:#f92672">--</span>) {
                $word <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_shift</span>($queue1);
                <span style="color:#66d9ef">for</span>($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $n; $i<span style="color:#f92672">++</span>) {
                    $old <span style="color:#f92672">=</span> $word[$i];
                    <span style="color:#66d9ef">for</span> ($k <span style="color:#f92672">=</span> <span style="color:#a6e22e">ord</span>(<span style="color:#e6db74">&#39;a&#39;</span>); $k <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">ord</span>(<span style="color:#e6db74">&#39;z&#39;</span>); $k<span style="color:#f92672">++</span>) {
                        <span style="color:#66d9ef">if</span> ($old <span style="color:#f92672">==</span> <span style="color:#a6e22e">chr</span>($k)) <span style="color:#66d9ef">continue</span>;
                        $word[$i] <span style="color:#f92672">=</span> <span style="color:#a6e22e">chr</span>($k);
                        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isset</span>($h2[$word])) <span style="color:#66d9ef">return</span> $step <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
                        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>$visited[$word] <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">isset</span>($wordList[$word])) {
                            $queue1[] <span style="color:#f92672">=</span> $word;
                            $visited[$word] <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
                        }
                    }
                    $word[$i] <span style="color:#f92672">=</span> $old;
                }
            }
        }
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
    }
    
    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 优化双bfs
</span><span style="color:#e6db74">     * @param String $beginWord
</span><span style="color:#e6db74">     * @param String $endWord
</span><span style="color:#e6db74">     * @param String[] $wordList
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">ladderLength</span>($beginWord, $endWord, $wordList) {
        $wordList <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_flip</span>($wordList);
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isset</span>($wordList[$endWord])) <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
        $queue1 <span style="color:#f92672">=</span> [$beginWord];
        $queue2 <span style="color:#f92672">=</span> [$endWord];
        $n <span style="color:#f92672">=</span> <span style="color:#a6e22e">strlen</span>($beginWord);
        $step <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">while</span>($queue1) {
            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">count</span>($queue1) <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">count</span>($queue2)) [$queue1, $queue2] <span style="color:#f92672">=</span> [$queue2, $queue1];
            $step<span style="color:#f92672">++</span>;
            $size <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($queue1);
            $h2 <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_flip</span>($queue2);
            <span style="color:#66d9ef">while</span> ($size<span style="color:#f92672">--</span>) {
                $word <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_shift</span>($queue1);
                <span style="color:#66d9ef">for</span>($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $n; $i<span style="color:#f92672">++</span>) {
                    $old <span style="color:#f92672">=</span> $word[$i];
                    <span style="color:#66d9ef">for</span> ($k <span style="color:#f92672">=</span> <span style="color:#a6e22e">ord</span>(<span style="color:#e6db74">&#39;a&#39;</span>); $k <span style="color:#f92672">&lt;=</span> <span style="color:#a6e22e">ord</span>(<span style="color:#e6db74">&#39;z&#39;</span>); $k<span style="color:#f92672">++</span>) {
                        <span style="color:#66d9ef">if</span> ($old <span style="color:#f92672">==</span> <span style="color:#a6e22e">chr</span>($k)) <span style="color:#66d9ef">continue</span>;
                        $word[$i] <span style="color:#f92672">=</span> <span style="color:#a6e22e">chr</span>($k);
                        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isset</span>($h2[$word])) <span style="color:#66d9ef">return</span> $step <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
                        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isset</span>($wordList[$word])) {
                            <span style="color:#a6e22e">unset</span>($wordList[$word]);
                            $queue1[] <span style="color:#f92672">=</span> $word;
                        }
                    }
                    $word[$i] <span style="color:#f92672">=</span> $old;
                }
            }
        }
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
    }
}
</code></pre></div><h4 id="433-最小基因变化httpsleetcode-cncomproblemsminimum-genetic-mutation"><a href="https://leetcode-cn.com/problems/minimum-genetic-mutation/">433. 最小基因变化</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * 双bfs
</span><span style="color:#e6db74">     * @param String $start
</span><span style="color:#e6db74">     * @param String $end
</span><span style="color:#e6db74">     * @param String[] $bank
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">minMutation</span>($start, $end, $bank) {
        $bank <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_flip</span>($bank);
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isset</span>($bank[$end])) <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
        <span style="color:#66d9ef">if</span> ($start <span style="color:#f92672">==</span> $end) <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
        $q1 <span style="color:#f92672">=</span> [$start];
        $q2 <span style="color:#f92672">=</span> [$end];
        $len <span style="color:#f92672">=</span> <span style="color:#a6e22e">strlen</span>($start);
        $chars <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;A&#39;</span>, <span style="color:#e6db74">&#39;C&#39;</span>, <span style="color:#e6db74">&#39;G&#39;</span>, <span style="color:#e6db74">&#39;T&#39;</span>];
        $step <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">while</span> ($q1) {
            $step<span style="color:#f92672">++</span>;
            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">count</span>($q1) <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">count</span>($q2)) [$q1, $q2] <span style="color:#f92672">=</span> [$q2, $q1];
            $size  <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($q1);
            $h2 <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_flip</span>($q2);
            <span style="color:#66d9ef">while</span> ($size<span style="color:#f92672">--</span>) {
                $word <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_shift</span>($q1);
                <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $len; $i<span style="color:#f92672">++</span>) {
                    $old <span style="color:#f92672">=</span> $word[$i];
                    <span style="color:#66d9ef">foreach</span> ($chars <span style="color:#66d9ef">as</span> $char) {
                        $word[$i] <span style="color:#f92672">=</span> $char;
                        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isset</span>($h2[$word])) <span style="color:#66d9ef">return</span> $step;
                        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isset</span>($bank[$word])) {
                            <span style="color:#a6e22e">unset</span>($bank[$word]);
                            $q1[] <span style="color:#f92672">=</span> $word;
                        }
                    }
                    $word[$i] <span style="color:#f92672">=</span> $old;
                }
            }
        }
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    }
}
</code></pre></div><h3 id="课后作业">课后作业</h3>
<h4 id="总结双向-bfs-代码模版">总结双向 BFS 代码模版</h4>
<p>请同学们提交在第 6 周学习总结中。</p>
<h2 id="4-启发式搜索的实现特性和题解">4. 启发式搜索的实现、特性和题解</h2>
<h3 id="参考链接-3">参考链接</h3>
<p><a href="https://shimo.im/docs/CXvjHyWhpQcxXjcw/">A* 代码模板</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">AstarSearch</span>(graph, start, end):

	pq <span style="color:#f92672">=</span> collections<span style="color:#f92672">.</span>priority_queue() <span style="color:#75715e"># 优先级 —&gt; 估价函数</span>
	pq<span style="color:#f92672">.</span>append([start]) 
	visited<span style="color:#f92672">.</span>add(start)

	<span style="color:#66d9ef">while</span> pq: 
		node <span style="color:#f92672">=</span> pq<span style="color:#f92672">.</span>pop() <span style="color:#75715e"># can we add more intelligence here ?</span>
		visited<span style="color:#f92672">.</span>add(node)

		process(node) 
		nodes <span style="color:#f92672">=</span> generate_related_nodes(node) 
   unvisited <span style="color:#f92672">=</span> [node <span style="color:#66d9ef">for</span> node <span style="color:#f92672">in</span> nodes <span style="color:#66d9ef">if</span> node <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> visited]
		pq<span style="color:#f92672">.</span>push(unvisited)
</code></pre></div><p><a href="https://dataaspirant.com/2015/04/11/five-most-popular-similarity-measures-implementation-in-python/">相似度测量方法</a></p>
<p><a href="https://leetcode.com/problems/shortest-path-in-binary-matrix/discuss/313347/A*-search-in-Python">二进制矩阵中的最短路径的 A* 解法</a></p>
<p><a href="https://zxi.mytechroad.com/blog/searching/8-puzzles-bidirectional-astar-vs-bidirectional-bfs/">8 puzzles 解法比较</a></p>
<h3 id="实战题目-3">实战题目</h3>
<h4 id="1091-二进制矩阵中的最短路径httpsleetcode-cncomproblemsshortest-path-in-binary-matrix"><a href="https://leetcode-cn.com/problems/shortest-path-in-binary-matrix/">1091. 二进制矩阵中的最短路径</a></h4>
<p><a href="https://leetcode-cn.com/problems/shortest-path-in-binary-matrix/solution/java-a-search-by-1yx/">java A* search</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * bfs
</span><span style="color:#e6db74">     * @param Integer[][] $grid
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">shortestPathBinaryMatrix</span>($grid) {
        $n <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($grid);
        $m <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($grid[<span style="color:#ae81ff">0</span>]);
        <span style="color:#66d9ef">if</span> ($grid[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">||</span> $grid[$n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>][$m <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
        $queue <span style="color:#f92672">=</span> [];
        $visited <span style="color:#f92672">=</span> [];
        $queue[] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>];
        $visited[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
        $ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $dx <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>];
        $dy <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span> , <span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>];
        <span style="color:#66d9ef">while</span> ($queue) {
            $ans<span style="color:#f92672">++</span>;
            $size <span style="color:#f92672">=</span> <span style="color:#a6e22e">count</span>($queue);
            <span style="color:#66d9ef">while</span> ($size<span style="color:#f92672">--</span>) {
                [$x, $y] <span style="color:#f92672">=</span> <span style="color:#a6e22e">array_shift</span>($queue);
                <span style="color:#75715e">//if ($x == $n - 1 &amp;&amp; $y == $m - 1) return $ans;
</span><span style="color:#75715e"></span>                <span style="color:#75715e">//8连通
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">8</span>; $i<span style="color:#f92672">++</span>) {
                    $nx <span style="color:#f92672">=</span> $x <span style="color:#f92672">+</span> $dx[$i];
                    $ny <span style="color:#f92672">=</span> $y <span style="color:#f92672">+</span> $dy[$i];
                    <span style="color:#66d9ef">if</span> ($nx <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> $nx <span style="color:#f92672">&lt;</span> $n <span style="color:#f92672">&amp;&amp;</span> $ny <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> $ny <span style="color:#f92672">&lt;</span> $m 
                    <span style="color:#f92672">&amp;&amp;</span> $grid[$nx][$ny] <span style="color:#f92672">!=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>$visited[$nx][$ny]) {
                        <span style="color:#66d9ef">if</span> ($nx <span style="color:#f92672">==</span> $n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> $ny <span style="color:#f92672">==</span> $m <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">return</span> $ans <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
                        $queue[] <span style="color:#f92672">=</span> [$nx, $ny];
                        $visited[$nx][$ny] <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
                    }
                }
            }
        }
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    }
}
</code></pre></div><h4 id="773-滑动谜题httpsleetcode-cncomproblemssliding-puzzle"><a href="https://leetcode-cn.com/problems/sliding-puzzle/">773. 滑动谜题</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * bfs
</span><span style="color:#e6db74">     * @param Integer[][] $board
</span><span style="color:#e6db74">     * @return Integer
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">slidingPuzzle</span>($board) {
        $moves <span style="color:#f92672">=</span> [
            [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>],
            [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>],
            [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>],
            [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">4</span>],
            [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>],
            [<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>]
        ];
        $used <span style="color:#f92672">=</span> [];
        $cnt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        $s <span style="color:#f92672">=</span> <span style="color:#a6e22e">implode</span>(<span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#a6e22e">array_map</span>(<span style="color:#66d9ef">function</span> ($val) {<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">implode</span>(<span style="color:#e6db74">&#39;&#39;</span>, $val);}, $board));
        $q[] <span style="color:#f92672">=</span> [$s, <span style="color:#a6e22e">strpos</span>($s, <span style="color:#e6db74">&#39;0&#39;</span>)];
        <span style="color:#66d9ef">while</span> ($q) {
            $new <span style="color:#f92672">=</span> [];
            <span style="color:#66d9ef">foreach</span> ($q <span style="color:#66d9ef">as</span> $val) {
                [$s, $i] <span style="color:#f92672">=</span> $val;
                $used[$s] <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
                <span style="color:#66d9ef">if</span> ($s <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;123450&#39;</span>) <span style="color:#66d9ef">return</span> $cnt;
                <span style="color:#66d9ef">foreach</span> ($moves[$i] <span style="color:#66d9ef">as</span> $move) {
                    $tmp <span style="color:#f92672">=</span> $s[$i];
                    $s[$i] <span style="color:#f92672">=</span> $s[$move];
                    $s[$move] <span style="color:#f92672">=</span> $tmp;
                    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">isset</span>($used[$s])) $new[] <span style="color:#f92672">=</span> [$s, $move];
                    $tmp <span style="color:#f92672">=</span> $s[$i];
                    $s[$i] <span style="color:#f92672">=</span> $s[$move];
                    $s[$move] <span style="color:#f92672">=</span> $tmp;
                } 
            }
            $q <span style="color:#f92672">=</span> $new;
            $cnt<span style="color:#f92672">++</span>;
        }
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    }
}
</code></pre></div><h1 id="第7周-第15课--红黑树和avl树">第7周 第15课 | 红黑树和AVL树</h1>
<h2 id="avl树和红黑树的实现和特性">AVL树和红黑树的实现和特性</h2>
<h3 id="参考链接-4">参考链接</h3>
<h4 id="平衡树httpsenwikipediaorgwikiself-balancing_binary_search_tree"><a href="https://en.wikipedia.org/wiki/Self-balancing_binary_search_tree">平衡树</a></h4>
<h3 id="本周作业">本周作业</h3>
<h3 id="简单">简单</h3>
<h4 id="70-爬楼梯httpsleetcode-cncomproblemsclimbing-stairs-1"><a href="https://leetcode-cn.com/problems/climbing-stairs/">70. 爬楼梯</a></h4>
<p>方法一：暴力递归【时间复杂度：O(2^n)， 空间复杂度：O(n)】</p>
<p>方法二：递归+记忆化 【时间复杂度：O(n)， 空间复杂度：O(n)】</p>
<p>方法三：动态规划 【时间复杂度：O(n)， 空间复杂度：O(n)】</p>
<p>方法四：斐波那契数【时间复杂度：O(n)， 空间复杂度：O(1)】</p>
<p>方法五：Binets 方法（矩阵乘法）【时间复杂度：O(log(n))， 空间复杂度：O(1)】</p>
<p>方法六：斐波那契公式【时间复杂度：O(log(n))， 空间复杂度：O(1)】</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">climbStairs</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">double</span> sqrt5<span style="color:#f92672">=</span>Math<span style="color:#f92672">.</span><span style="color:#a6e22e">sqrt</span><span style="color:#f92672">(</span>5<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">double</span> fibn<span style="color:#f92672">=</span>Math<span style="color:#f92672">.</span><span style="color:#a6e22e">pow</span><span style="color:#f92672">((</span>1<span style="color:#f92672">+</span>sqrt5<span style="color:#f92672">)/</span>2<span style="color:#f92672">,</span>n<span style="color:#f92672">+</span>1<span style="color:#f92672">)-</span>Math<span style="color:#f92672">.</span><span style="color:#a6e22e">pow</span><span style="color:#f92672">((</span>1<span style="color:#f92672">-</span>sqrt5<span style="color:#f92672">)/</span>2<span style="color:#f92672">,</span>n<span style="color:#f92672">+</span>1<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">)(</span>fibn<span style="color:#f92672">/</span>sqrt5<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="中等">中等</h3>
<h4 id="208-实现-trie-前缀树httpsleetcode-cncomproblemsimplement-trie-prefix-tree-2"><a href="https://leetcode-cn.com/problems/implement-trie-prefix-tree/">208. 实现 Trie (前缀树)</a></h4>
<p>方法一：使用数组实现</p>
<p>方法二：定义单独的节点实现</p>
<h4 id="547-朋友圈httpsleetcode-cncomproblemsfriend-circles-1"><a href="https://leetcode-cn.com/problems/friend-circles/">547. 朋友圈</a></h4>
<p>方法一：深度优先搜索【时间复杂度：O(n^2)， 空间复杂度：O(n)】</p>
<p>方法二：广度优先搜索【时间复杂度：O(n^2)， 空间复杂度：O(n)】</p>
<p>方法三：并查集【时间复杂度：O(n^3)， 空间复杂度：O(n)】</p>
<h4 id="200-岛屿数量httpsleetcode-cncomproblemsnumber-of-islands-1"><a href="https://leetcode-cn.com/problems/number-of-islands/">200. 岛屿数量</a></h4>
<p>方法一：深度优先搜索【时间复杂度：O(MN)， 空间复杂度：O(MN)】</p>
<p>方法二：广度优先搜索【时间复杂度：O(MN)， 空间复杂度：O(min(M,N))】</p>
<p>方法三：并查集【时间复杂度：O(MN∗α(MN))， 空间复杂度：O(MN)】</p>
<h4 id="130-被围绕的区域httpsleetcode-cncomproblemssurrounded-regions-1"><a href="https://leetcode-cn.com/problems/surrounded-regions/">130. 被围绕的区域</a></h4>
<p>方法一：深度优先搜索</p>
<p>方法二：广度优先搜索</p>
<p>方法三：并查集</p>
<h4 id="36-有效的数独httpsleetcode-cncomproblemsvalid-sudoku-1"><a href="https://leetcode-cn.com/problems/valid-sudoku/">36. 有效的数独</a></h4>
<p>方法一：一次迭代【时间复杂度：O(1)， 空间复杂度：O(1)】</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">//块索引转换
</span><span style="color:#75715e"></span><span style="color:#f92672">(</span>i <span style="color:#f92672">/</span> 3 <span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 3 <span style="color:#f92672">+</span> j <span style="color:#f92672">/</span> 3
</code></pre></div><h4 id="22-括号生成httpsleetcode-cncomproblemsgenerate-parentheses-1"><a href="https://leetcode-cn.com/problems/generate-parentheses/">22. 括号生成</a></h4>
<p>方法一：暴力</p>
<p>方法二：回溯法</p>
<p>方法三：按括号序列的长度递归</p>
<p><a href="https://leetcode-cn.com/problems/generate-parentheses/solution/gua-hao-sheng-cheng-by-leetcode-solution/">上述方法题解地址</a></p>
<p>方法四：深度优先搜索</p>
<p>方法五：广度优先搜索</p>
<p>方法六：动态规划</p>
<p><a href="https://leetcode-cn.com/problems/generate-parentheses/solution/hui-su-suan-fa-by-liweiwei1419/">题解地址</a></p>
<h4 id="127-单词接龙httpsleetcode-cncomproblemsword-ladder-1"><a href="https://leetcode-cn.com/problems/word-ladder/">127. 单词接龙</a></h4>
<p>方法一：单向bfs</p>
<p>方法二：双向bfs</p>
<h4 id="433-最小基因变化httpsleetcode-cncomproblemsminimum-genetic-mutation-1"><a href="https://leetcode-cn.com/problems/minimum-genetic-mutation/">433. 最小基因变化</a></h4>
<p>方法一：单向bfs</p>
<p>方法二：双向bfs</p>
<p>127 和 433 方法相同</p>
<h4 id="1091-二进制矩阵中的最短路径httpsleetcode-cncomproblemsshortest-path-in-binary-matrix-1"><a href="https://leetcode-cn.com/problems/shortest-path-in-binary-matrix/">1091. 二进制矩阵中的最短路径</a></h4>
<p>方法一：bfs</p>
<p>方法二：A*search（优先级队列）重点优先级计算公式</p>
<h4 id="773-滑动谜题httpsleetcode-cncomproblemssliding-puzzle-1"><a href="https://leetcode-cn.com/problems/sliding-puzzle/">773. 滑动谜题</a></h4>
<p>方法一：bfs</p>
<p>方法二：A*search（优先级队列）重点优先级计算公式</p>
<h3 id="困难">困难</h3>
<h4 id="212-单词搜索-iihttpsleetcode-cncomproblemsword-search-ii-1"><a href="https://leetcode-cn.com/problems/word-search-ii/">212. 单词搜索 II</a></h4>
<p>方法一：trie+dfs</p>
<p>方法二：trie+bfs</p>
<h4 id="51-n皇后httpsleetcode-cncomproblemsn-queens-1"><a href="https://leetcode-cn.com/problems/n-queens/">51. N皇后</a></h4>
<p>方法一：回溯法</p>
<p>方法二：回溯+位运算</p>
<p>方法三：dfs <a href="https://leetcode-cn.com/problems/n-queens/solution/51-by-ikaruga/">题解</a></p>
<h4 id="37-解数独httpsleetcode-cncomproblemssudoku-solver-1"><a href="https://leetcode-cn.com/problems/sudoku-solver/">37. 解数独</a></h4>
<p>方法一：回溯法</p>
<h2 id="下周预习">下周预习</h2>
<h3 id="预习知识点">预习知识点：</h3>
<ul>
<li><a href="https://time.geekbang.org/column/article/76827">位图：如何实现网页爬虫中的 URL 去重功能？</a></li>
<li><a href="https://time.geekbang.org/column/article/77142">概率统计：如何利用朴素贝叶斯算法过滤垃圾短信？</a></li>
<li><a href="https://time.geekbang.org/column/article/41802">排序（上）：为什么插入排序比冒泡排序更受欢迎？</a></li>
<li><a href="https://time.geekbang.org/column/article/41913">排序（下）：如何用快排思想在 O(n) 内查找第 K 大元素？</a></li>
<li><a href="https://time.geekbang.org/column/article/42038">线性排序：如何根据年龄给 100 万用户数据排序？</a></li>
<li><a href="https://time.geekbang.org/column/article/42359">排序优化：如何实现一个通用的、高性能的排序函数？</a></li>
<li><a href="https://time.geekbang.org/column/article/69913">堆和堆排序：为什么说堆排序没有快速排序快？</a></li>
<li><a href="https://time.geekbang.org/column/article/76207">拓扑排序：如何确定代码源文件的编译依赖关系？</a></li>
</ul>
<h3 id="预习题目">预习题目：</h3>
<ul>
<li><a href="https://leetcode-cn.com/problems/n-queens/description/">N 皇后</a></li>
<li><a href="https://leetcode-cn.com/problems/lru-cache/#/">LRU 缓存机制</a></li>
<li><a href="https://leetcode-cn.com/problems/valid-anagram/">有效的字母异位词</a></li>
</ul>
<p>​</p>

</div>


  
</article>
      <footer id="main-footer" class="container main_footer">
  

  <div class="container nav foot no-print">
  
<a href="https://blog.lbbniu.com/license">license</a>


  <a class="toplink" href="#">back to top</a>

</div>

  <div class="container credits">
  
<div class="container footline">
  
  code with <!-- raw HTML omitted --><!-- raw HTML omitted -->


</div>


  
<div class="container copyright">
  
  (c) 2021 lbbniu.


</div>


</div>

</footer>

    </main>
    


<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



    
  </body>
</html>

