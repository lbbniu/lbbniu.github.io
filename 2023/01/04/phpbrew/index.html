<!doctype html><html lang=zh dir=ltr><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>一篇文章精通php多版本管理工具：phpbrew | lbbniu</title>
<meta name=generator content="Hugo Eureka 0.9.3"><link rel=stylesheet href=/css/eureka.min.9cec6350e37e534b0338fa9a085bf06855de3b0f2dcf857e792e5e97b07ea905d4d5513db554cbc26a9c3da622bae92d.css><script defer src=/js/eureka.min.fa9a6bf6d7a50bb635b4cca7d2ba5cf3dfb095ae3798773f1328f7950028b48c17d06276594e1b5f244a25a6c969a705.js></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&amp;family=Noto+Serif+SC:wght@400;600;700&amp;display=swap" as=style onload='this.onload=null,this.rel="stylesheet"'><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/github.min.css media=print onload='this.media="all",this.onload=null' crossorigin><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/highlight.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/dart.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/php.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/java.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/go.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/python.min.js crossorigin></script><link rel=stylesheet href=/css/highlightjs.min.2958991528e43eb6fc9b8c4f2b8e052f79c4010718e1d1e888a777620e9ee63021c2c57ec7417a3108019bb8c41943e6.css media=print onload='this.media="all",this.onload=null'><script defer type=text/javascript src=/js/fontawesome.min.35973bea57658ef0dd22ad59ea4642b6c8c67af62bed8659ac326d284ef285a6657cdbcf57d3b2910e7e992f2b20426e.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ media=print onload='this.media="all",this.onload=null' crossorigin><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script><script defer src=https://cdn.jsdelivr.net/npm/mermaid@8.14.0/dist/mermaid.min.js integrity=sha384-atOyb0FxAgN9LyAc6PEf9BjgwLISyansgdH8/VXQH8p2o5vfrRgmGIJ2Sg22L0A0 crossorigin></script><link rel=icon type=image/png sizes=32x32 href=/images/icon_hu46eef4dc61dcf438cf488ad55e1d2c12_638750_32x32_fill_box_center_3.png><link rel=apple-touch-icon sizes=180x180 href=/images/icon_hu46eef4dc61dcf438cf488ad55e1d2c12_638750_180x180_fill_box_center_3.png><meta name=description content="一篇文章精通php多版本管理工具：phpbrew，在您的 $HOME 目录中构建并安装多个版本的 php。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"文章列表","item":"/post/"},{"@type":"ListItem","position":2,"name":"一篇文章精通php多版本管理工具：phpbrew","item":"/2023/01/04/phpbrew/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"/2023/01/04/phpbrew/"},"headline":"一篇文章精通php多版本管理工具：phpbrew | lbbniu","datePublished":"2023-01-04T22:20:00+08:00","dateModified":"2023-01-04T22:20:00+08:00","wordCount":721,"author":{"@type":"Person","name":["lbbniu"]},"publisher":{"@type":"Person","name":"lbbniu","logo":{"@type":"ImageObject","url":"/images/icon.gif"}},"description":"一篇文章精通php多版本管理工具：phpbrew，在您的 $HOME 目录中构建并安装多个版本的 php。"}</script><meta property="og:title" content="一篇文章精通php多版本管理工具：phpbrew | lbbniu"><meta property="og:type" content="article"><meta property="og:image" content="/images/icon.png"><meta property="og:url" content="/2023/01/04/phpbrew/"><meta property="og:description" content="一篇文章精通php多版本管理工具：phpbrew，在您的 $HOME 目录中构建并安装多个版本的 php。"><meta property="og:locale" content="zh"><meta property="og:site_name" content="lbbniu"><meta property="article:published_time" content="2023-01-04T22:20:00+08:00"><meta property="article:modified_time" content="2023-01-04T22:20:00+08:00"><meta property="article:section" content="post"><meta property="article:tag" content="标签"><meta property="og:see_also" content="/2022/02/15/uri-addr/"><meta property="og:see_also" content="/2022/02/15/uri-addr/"><body class="flex min-h-screen flex-col"><header class="min-h-16 pl-scrollbar bg-secondary-bg fixed z-50 flex w-full items-center shadow-sm"><div class="mx-auto w-full max-w-screen-xl"><script>let storageColorScheme=localStorage.getItem("lightDarkMode");((storageColorScheme=="Auto"||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName("html")[0].classList.add("dark")</script><nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0"><a href=/ class="me-6 text-primary-text text-xl font-bold">lbbniu</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i></button><div id=target class="hidden block md:flex md:grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20"><div class="md:flex md:h-16 text-sm md:grow pb-4 md:pb-0 border-b md:border-b-0"><a href=/post/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">文章</a>
<a href=/cloud-native/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">云原生</a>
<a href=/study/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">算法学习</a>
<a href=/docs/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">Go学习训练营</a>
<a href=/tags/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent me-4">标签</a></div><div class=flex><div class="relative pt-4 md:pt-0"><div class="cursor-pointer hover:text-eureka" id=lightDarkMode><i class="fas fa-adjust"></i></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open></div><div class="absolute flex flex-col start-0 md:start-auto end-auto md:end-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions><span class="px-4 py-1 hover:text-eureka" name=Light>浅色</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>深色</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>自动</span></div></div></div></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile></div></nav><script>let element=document.getElementById("lightDarkMode");storageColorScheme==null||storageColorScheme=="Auto"?document.addEventListener("DOMContentLoaded",()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",switchDarkMode)}):storageColorScheme=="Light"?(element.firstElementChild.classList.remove("fa-adjust"),element.firstElementChild.setAttribute("data-icon","sun"),element.firstElementChild.classList.add("fa-sun")):storageColorScheme=="Dark"&&(element.firstElementChild.classList.remove("fa-adjust"),element.firstElementChild.setAttribute("data-icon","moon"),element.firstElementChild.classList.add("fa-moon")),document.addEventListener("DOMContentLoaded",()=>{getcolorscheme(),switchBurger()})</script></div></header><main class="grow pt-16"><div class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl lg:px-4 xl:px-8"><div class="grid grid-cols-2 gap-4 lg:grid-cols-8 lg:pt-12"><div class="bg-secondary-bg col-span-2 rounded px-6 py-8 lg:col-span-6"><article class=prose><h1 class=mb-4>一篇文章精通php多版本管理工具：phpbrew</h1><div class="text-tertiary-text not-prose mt-2 flex flex-row flex-wrap items-center"><div class="me-6 my-2"><i class="fas fa-calendar me-1"></i>
<span>2023-01-04</span></div><div class="me-6 my-2"><i class="fas fa-clock me-1"></i>
<span>4分钟阅读时长</span></div><div class="me-6 my-2"><i class="fas fa-folder me-1"></i>
<a href=/categories/%E5%88%86%E7%B1%BB/ class=hover:text-eureka>分类</a></div></div><p>phpbrew是一个工具，可以在$HOME目录中构建和安装多个PHP版本。</p><p>phpbrew的功能包括：</p><ol><li>将配置选项简化为变体，不再担心路径问题。</li><li>使用不同的变体构建PHP，如PDO、mysql、sqlite、debug等。</li><li>编译Apache PHP模块，并按不同版本分开。</li><li>在个人目录中构建和安装PHP，无需root权限。</li><li>轻松切换版本，与bash/zsh shell集成。</li><li>自动功能检测。</li><li>轻松在当前环境中安装和启用PHP扩展。</li><li>在系统范围内安装多个PHP。</li><li>针对HomeBrew和MacPorts的路径检测优化。</li></ol><p><img src=https://typora.lbbniu.com/typora/01.png alt=img></p><h2 id=要求>要求</h2><p>请查看 <a href=https://github.com/phpbrew/phpbrew/wiki/Requirement target=_blank rel=noopener>Requirement</a>
在开始之前。你需要安装一些用于构建 PHP 的开发包。</p><h2 id=安装>安装</h2><p>只需下载它：</p><pre><code class=language-bash>curl -L -O https://github.com/phpbrew/phpbrew/releases/latest/download/phpbrew.phar
chmod +x phpbrew.phar
</code></pre><p>然后，你可以将其安装到 bin 文件夹中：</p><pre><code class=language-bash>sudo mv phpbrew.phar /usr/local/bin/phpbrew
</code></pre><p>确保在你的 <code>$PATH</code> 环境变量中有 <code>/usr/local/bin</code>。</p><h2 id=设置>设置</h2><p>初始化一个用于你的 shell 环境的 bash 脚本：</p><pre><code class=language-bash>phpbrew init
</code></pre><p>将以下行添加到你的 .bashrc 或 .zshrc 文件：</p><pre><code class=language-bash>[[ -e ~/.phpbrew/bashrc ]] &amp;&amp; source ~/.phpbrew/bashrc
</code></pre><h2 id=设置查找前缀>设置查找前缀</h2><p>你可以设置你首选的用于查找库的默认前缀，可用选项有 macports、homebrew、debian、ubuntu 或自定义路径：</p><p>对于 Homebrew 用户：</p><pre><code class=language-bash>phpbrew lookup-prefix homebrew
</code></pre><p>对于 Macports 用户：</p><pre><code class=language-bash>phpbrew lookup-prefix macports
</code></pre><h2 id=基本用法>基本用法</h2><p>列出已知版本：</p><pre><code class=language-bash>$ phpbrew known
7.0: 7.0.3, 7.0.2, 7.0.1, 7.0.0 ...
5.6: 5.6.18, 5.6.17, 5.6.16, 5.6.15, 5.6.14, 5.6.13, 5.6.12, 5.6.11 ...
5.5: 5.5.32, 5.5.31, 5.5.30, 5.5.29, 5.5.28, 5.5.27, 5.5.26, 5.5.25 ...
5.4: 5.4.45, 5.4.44, 5.4.43, 5.4.42, 5.4.41, 5.4.40, 5.4.39, 5.4.38 ...
5.3: 5.3.29, 5.3.28 ...
</code></pre><p>显示更多次要版本：</p><pre><code class=language-bash>phpbrew known --more
</code></pre><p>更新发布信息：</p><pre><code class=language-bash>phpbrew update
</code></pre><p>获取旧版本（低于5.4）</p><p>请注意，我们不保证可以成功构建官方不支持的PHP版本，请不要报告有关旧版本的问题，这些问题将不会修复。</p><pre><code class=language-bash>phpbrew update --old
</code></pre><p>列出已知的旧版本（低于5.4）</p><pre><code class=language-bash>phpbrew known --old
</code></pre><h2 id=开始构建自己的php>开始构建自己的PHP</h2><p>使用默认变体构建和安装PHP：</p><pre><code class=language-bash>phpbrew install 5.4.0 +default
</code></pre><p>这里建议使用默认变体集，其中包括最常用的变体。如果你需要进行最小安装，只需删除默认变体集。</p><p>你可以通过传递 <code>-j</code> 或 <code>--jobs</code> 选项启用并行编译，以下是一个示例：</p><pre><code class=language-bash>phpbrew install -j $(nproc) 5.4.0 +default
</code></pre><p>带有测试：</p><pre><code class=language-bash>phpbrew install --test 5.4.0
</code></pre><p>带有调试信息：</p><pre><code class=language-bash>phpbrew -d install --test 5.4.0
</code></pre><p>安装旧版本（低于5.3）：</p><pre><code class=language-bash>phpbrew install --old 5.2.13
</code></pre><p>安装下一个（不稳定）版本：</p><pre><code class=language-bash>phpbrew install next as php-7.1.0
</code></pre><p>从GitHub标签安装：</p><pre><code class=language-bash>phpbrew install github:php/php-src@PHP-7.0 as php-7.0.0
</code></pre><p>清理构建目录：</p><pre><code class=language-bash>phpbrew clean php-5.4.0
</code></pre><h2 id=变体>变体</h2><p>PHPBrew为你整理了配置选项，你可以简单地指定变体名称，phpbrew将检测包含路径和用于配置的构建选项。</p><p>PHPBrew提供了默认变体和一些虚拟变体。默认变体包括最常用的变体，而虚拟变体定义了一个变体集，你可以使用一个虚拟变体一次性启用多个变体。</p><p>要查看这些变体中包含了什么，只需运行<code>variants</code>子命令来列出这些变体：</p><pre><code class=language-bash>$ phpbrew variants
Variants:
  all, apxs2, bcmath, bz2, calendar, cgi, cli, ctype, dba, debug, dom, embed,
  exif, fileinfo, filter, fpm, ftp, gcov, gd, gettext, hash, iconv, icu,
  imap, intl, ipc, ipv6, json, kerberos, mbregex, mbstring, mcrypt, mhash,
  mysql, openssl, pcntl, pcre, pdo, pgsql, phar, posix, readline, session,
  soap, sockets, sqlite, tidy, tokenizer, xml_all, xmlrpc, zip, zlib, gmp


Virtual variants:
  dbs:      sqlite, mysql, pgsql, pdo
  mb:       mbstring, mbregex
  neutral:
  default:  filter, dom, bcmath, ctype, mhash, fileinfo, pdo, posix, ipc,
            pcntl, bz2, zip, cli, json, mbstring, mbregex, calendar, sockets, readline,
            xml_all
</code></pre><p>使用变体构建PHP的示例：</p><pre><code class=language-bash>phpbrew install 5.3.10 +default
phpbrew install 5.3.10 +mysql +pdo
phpbrew install 5.3.10 +mysql +pdo +apxs2
phpbrew install 5.3.10 +mysql +pdo +apxs2=/usr/bin/apxs2
</code></pre><p>要启用一个变体，只需在变体名称前加上前缀<code>+</code>，例如：</p><pre><code class=language-bash>+mysql
</code></pre><p>要禁用一个变体，只需在变体名称前加上前缀<code>-</code>。</p><p>例如，如果我们希望使用默认选项和数据库支持（mysql、sqlite、postgresql）构建PHP，你可以简单地运行：</p><pre><code class=language-bash>phpbrew install 5.4.5 +default+dbs
</code></pre><p>你还可以使用额外的变体构建PHP：</p><pre><code class=language-bash>phpbrew install 5.3.10 +mysql+sqlite+cgi
phpbrew install 5.3.10 +mysql+debug+pgsql +apxs2
phpbrew install 5.3.10 +pdo +mysql +pgsql +apxs2=/usr/bin/apxs2
</code></pre><p>要构建带有pgsql（PostgreSQL）扩展的PHP：</p><pre><code class=language-bash>phpbrew install 5.4.1 +pgsql+pdo
</code></pre><p>或在Mac OS X上使用postgresql基本目录构建pgsql扩展：</p><pre><code class=language-bash>phpbrew install 5.4.1 +pdo+pgsql=/opt/local/lib/postgresql91/bin
</code></pre><p>pgsql路径是<code>pg_config</code>的位置，你可以在<code>/opt/local/lib/postgresql91/bin</code>找到<code>pg_config</code>。如果要使用中性编译选项构建PHP，你可以指定中性虚拟变体，这意味着phpbrew不会添加任何额外的编译选项，包括<code>--disable-all</code>。但是，一些选项（例如<code>--enable-libxml</code>）仍然会自动添加以支持pear安装。你可以使用中性构建PHP：</p><pre><code class=language-bash>phpbrew install 5.4.1 +neutral
</code></pre><p>有关更多详细信息，请查看 <a href=https://github.com/phpbrew/phpbrew/wiki target=_blank rel=noopener>PHPBrew Cookbook</a>
。</p><h2 id=额外的配置选项>额外的配置选项</h2><p>要传递额外的配置参数，可以这样做：</p><pre><code class=language-bash>phpbrew install 5.3.10 +mysql +sqlite -- \
    --enable-ftp --apxs2=/opt/local/apache2/bin/apxs
</code></pre><h2 id=使用和切换>使用和切换</h2><p>使用（临时切换版本）：</p><pre><code class=language-bash>phpbrew use 5.4.22
</code></pre><p>切换PHP版本（切换默认版本）：</p><pre><code class=language-bash>phpbrew switch 5.4.18
</code></pre><p>关闭：</p><pre><code class=language-bash>phpbrew off
</code></pre><p>如果启用了Apache PHP模块，请记得注释或删除这些设置。</p><pre><code class=language-bash>$ sudo vim /etc/httpd/conf/httpd.conf
# LoadModule php5_module        /usr/lib/httpd/modules/libphp5.3.21.so
# LoadModule php5_module        /usr/lib/httpd/modules/libphp5.3.20.so
</code></pre><h2 id=列出已安装的php>列出已安装的PHP</h2><pre><code class=language-bash>phpbrew list
</code></pre><h2 id=扩展安装程序>扩展安装程序</h2><p>您还可以轻松地安装PHP扩展，无论是与PHP源代码一起提供的扩展，还是来自PECL。</p><p>如果在PHP源代码中找到扩展目录，PHPBrew将自动切换到PHP源目录并安装扩展。</p><p>如果在PHP源代码中未找到扩展目录，PHPBrew将从PECL <a href=http://pecl.php.net target=_blank rel=noopener>http://pecl.php.net</a>
获取扩展包。</p><p>PHPBrew还创建扩展配置以启用安装的扩展，因此您无需手动编写配置文件即可启用它。扩展配置目录在：</p><pre><code class=language-bash>~/.phpbrew/php/php-{version}/var/db
</code></pre><h3 id=安装扩展---最简单的方式>安装扩展 - 最简单的方式</h3><p>在安装任何PHP扩展之前，应设置当前运行的PHP版本：</p><pre><code class=language-bash>phpbrew use php-5.5.6
</code></pre><p>然后运行<code>ext install</code>来安装扩展：</p><pre><code class=language-bash>phpbrew ext install apcu
phpbrew ext install memcache
</code></pre><h3 id=使用稳定性安装扩展>使用稳定性安装扩展</h3><p>使用稳定性标签安装扩展：</p><pre><code class=language-bash>phpbrew ext install xdebug stable
phpbrew ext install xdebug latest
phpbrew ext install xdebug beta
</code></pre><p>使用版本名称安装扩展：</p><pre><code class=language-bash>phpbrew ext install xdebug 2.0.1
</code></pre><h3 id=展示扩展配置选项>展示扩展配置选项</h3><p>要查看是否有一些构建扩展的配置选项，可以使用 <code>ext show</code> 命令。请注意，<code>show</code> 命令仅适用于内置扩展：</p><pre><code class=language-bash>phpbrew ext show apcu
</code></pre><h3 id=使用自定义选项安装扩展>使用自定义选项安装扩展</h3><pre><code class=language-bash>phpbrew ext install yaml -- --with-yaml=/opt/local
</code></pre><h3 id=从github安装扩展>从GitHub安装扩展</h3><p>特殊前缀 <code>github:</code> 告诉 phpbrew 从 php-memcached-dev/phpmemcached 存储库获取扩展并切换到 php7 分支：</p><pre><code class=language-bash>phpbrew ext install github:php-memcached-dev/php-memcached php7 -- --disable-memcached-sasl
</code></pre><h3 id=使用特定下载工具安装扩展>使用特定下载工具安装扩展</h3><p>目前，phpbrew 支持 4 种不同的下载工具实现：</p><ul><li><code>php_curl</code> - 使用内置的 php curl 扩展下载文件。</li><li><code>php_stream</code> - 使用内置的 php 流包装器下载文件。</li><li><code>curl</code></li><li><code>wget</code></li></ul><p>可以使用你喜欢的下载工具替换默认的下载工具：</p><pre><code class=language-bash>phpbrew ext install --downloader php_curl apcu
</code></pre><p>基于 curl 的 php 扩展下载工具支持 User-Agent 和代理设置，因此如果遇到一些网络问题，你可以这样做：</p><pre><code class=language-bash>phpbrew ext install --download php_curl --http-proxy=... --http-proxy-auth=... apcu
</code></pre><h3 id=启用扩展>启用扩展</h3><p>你还可以通过 PECL 安装扩展并手动启用它：</p><pre><code class=language-bash>pecl install mongo
phpbrew ext enable mongo
</code></pre><p><code>ext enable</code> 命令允许你创建一个配置文件 <code>{当前 php base}/var/db/{extension name}.ini</code> 来启用该扩展。</p><h2 id=配置当前-php-版本的-phpini>配置当前 PHP 版本的 php.ini</h2><p>只需运行：</p><pre><code class=language-bash>phpbrew config
</code></pre><p>你可以将 EDITOR 环境变量指定为你喜欢的编辑器：</p><pre><code class=language-bash>export EDITOR=vim
</code></pre><p>然后运行：</p><pre><code class=language-bash>phpbrew config
</code></pre><h2 id=升级-phpbrew>升级 phpbrew</h2><p>要升级 phpbrew，只需运行 self-update 命令，此命令允许你安装来自 GitHub 主分支的最新版本：</p><pre><code class=language-bash>phpbrew self-update
</code></pre><h2 id=已安装的-phps>已安装的 PHP(s)</h2><p>已安装的 PHP 位于 ~/.phpbrew/php，例如，PHP 5.4.20 位于：</p><pre><code class=language-bash>~/.phpbrew/php/5.4.20/bin/php
</code></pre><p>你应该将配置文件放在：</p><pre><code class=language-bash>~/.phpbrew/php/5.4.20/etc/php.ini
</code></pre><p>扩展配置文件应放在：</p><pre><code class=language-bash>~/.phpbrew/php/5.4.20/var/db
~/.phpbrew/php/5.4.20/var/db/xdebug.ini
~/.phpbrew/php/5.4.20/var/db/apc.ini
~/.phpbrew/php/5.4.20/var/db/memcache.ini
... etc
</code></pre><h2 id=快速在目录之间切换的命令>快速在目录之间切换的命令</h2><p>切换到 PHP 构建目录：</p><pre><code class=language-bash>phpbrew build-dir
</code></pre><p>切换到 PHP 分发目录：</p><pre><code class=language-bash>phpbrew dist-dir
</code></pre><p>切换到 PHP etc 目录：</p><pre><code class=language-bash>phpbrew etc-dir
</code></pre><p>切换到 PHP var 目录：</p><pre><code class=language-bash>phpbrew var-dir
</code></pre><h2 id=php-fpm>PHP FPM</h2><p>phpbrew 还提供了一些有用的 FPM 管理子命令。要使用它们，请记住在构建自己的 PHP 时启用 +fpm 变体。</p><p>启动 php-fpm，只需键入：</p><pre><code class=language-bash>phpbrew fpm start
</code></pre><p>停止 php-fpm，输入：</p><pre><code class=language-bash>phpbrew fpm stop
</code></pre><p>显示 php-fpm 模块：</p><pre><code class=language-bash>phpbrew fpm module
</code></pre><p>测试 php-fpm 配置：</p><pre><code class=language-bash>phpbrew fpm test
</code></pre><p>编辑 php-fpm 配置：</p><pre><code class=language-bash>phpbrew fpm config
</code></pre><p>已安装的 php-fpm 位于 ~/.phpbrew/php/php-*/sbin。</p><p>对应的 php-fpm.conf 位于 ~/.phpbrew/php/php-*/etc/php-fpm.conf.default，你可以将默认配置文件复制到所需的位置。例如，</p><pre><code class=language-bash>cp -v ~/.phpbrew/php/php-*/etc/php-fpm.conf.default
    ~/.phpbrew/php/php-*/etc/php-fpm.conf

php-fpm --php-ini {php config file} --fpm-config {fpm config file}
</code></pre><h2 id=启用版本信息提示>启用版本信息提示</h2><p>要在 shell 提示中添加 PHP 版本信息，可以使用 &ldquo;PHPBREW_SET_PROMPT=1&rdquo; 变量。</p><p>默认情况下是 &ldquo;PHPBREW_SET_PROMPT=0&rdquo;（禁用）。要启用它，可以将此行添加到你的 ~/.bashrc 文件，并将此行放在 source ~/.phpbrew/bashrc 之前。</p><pre><code class=language-bash>export PHPBREW_SET_PROMPT=1
</code></pre><p>要在提示中嵌入版本信息，可以使用 phpbrew_current_php_version shell 函数，该函数在 .phpbrew/bashrc 中定义。并且你可以在你的 PS1 变量中设置版本信息，例如：</p><pre><code class=language-bash>PS1=&quot; \$(phpbrew_current_php_version) \$ &quot;
</code></pre><h2 id=已知问题>已知问题</h2><p>对于 PHP-5.3+ 版本，“在 OS X 上构建 intl 64 位失败” <a href="https://bugs.php.net/bug.php?id=48795" target=_blank rel=noopener>https://bugs.php.net/bug.php?id=48795</a></p><p>要使用 GD 扩展构建 PHP，你需要指定你的 libpng 目录和 libjpeg 目录，例如：</p><pre><code class=language-bash>phpbrew install php-5.4.10 +default +mysql +intl +gettext +apxs2=/usr/bin/apxs2 \
  -- --with-libdir=lib/x86_64-linux-gnu \
  --with-gd=shared \
  --enable-gd-natf \
  --with-jpeg-dir=/usr \
  --with-png-dir=/usr
</code></pre><h2 id=关注公众号获得更多精彩文章>关注公众号获得更多精彩文章</h2><p><img src=https://gitee.com/lbbniu/typora/raw/master/qrcode_for_gh_4ab47aa64a20_258.jpg alt=公众号：程序员大兵></p></article><div class=my-4><a href=/tags/%E6%A0%87%E7%AD%BE/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 me-2 hover:text-eureka">#标签</a></div><div class=py-2><div class="my-8 flex flex-col items-center md:flex-row"><a href=/authors/lbbniu/ class="md:me-4 text-primary-text h-24 w-24"><i class="fas fa-user-circle fa-6x"></i></a><div class="mt-4 w-full md:mt-0 md:w-auto"><a href=/authors/lbbniu/ class="mb-2 block border-b pb-1 text-lg font-bold"><h3>lbbniu</h3></a><span class="block pb-2"></span></div></div></div><div class="-mx-2 mt-4 flex flex-col border-t px-2 pt-4 md:flex-row md:justify-between"><div><span class="text-primary-text block font-bold">上一页</span>
<a href=/2023/02/13/uri-addr/ class=block>Golang语法的25个练习题：1至5题</a></div><div class="mt-4 md:mt-0 md:text-right"><span class="text-primary-text block font-bold">下一页</span>
<a href=/2022/10/28/polaris-go/ class=block>polaris-go 源码走读</a></div></div></div><div class=col-span-2><div class="bg-primary-bg
prose sticky top-16 z-10 hidden px-6 py-4 lg:block"><h3>本页内容</h3></div><div class="sticky-toc hidden px-6 pb-6 lg:block"><nav id=TableOfContents><ul><li><a href=#要求>要求</a></li><li><a href=#安装>安装</a></li><li><a href=#设置>设置</a></li><li><a href=#设置查找前缀>设置查找前缀</a></li><li><a href=#基本用法>基本用法</a></li><li><a href=#开始构建自己的php>开始构建自己的PHP</a></li><li><a href=#变体>变体</a></li><li><a href=#额外的配置选项>额外的配置选项</a></li><li><a href=#使用和切换>使用和切换</a></li><li><a href=#列出已安装的php>列出已安装的PHP</a></li><li><a href=#扩展安装程序>扩展安装程序</a><ul><li><a href=#安装扩展---最简单的方式>安装扩展 - 最简单的方式</a></li><li><a href=#使用稳定性安装扩展>使用稳定性安装扩展</a></li><li><a href=#展示扩展配置选项>展示扩展配置选项</a></li><li><a href=#使用自定义选项安装扩展>使用自定义选项安装扩展</a></li><li><a href=#从github安装扩展>从GitHub安装扩展</a></li><li><a href=#使用特定下载工具安装扩展>使用特定下载工具安装扩展</a></li><li><a href=#启用扩展>启用扩展</a></li></ul></li><li><a href=#配置当前-php-版本的-phpini>配置当前 PHP 版本的 php.ini</a></li><li><a href=#升级-phpbrew>升级 phpbrew</a></li><li><a href=#已安装的-phps>已安装的 PHP(s)</a></li><li><a href=#快速在目录之间切换的命令>快速在目录之间切换的命令</a></li><li><a href=#php-fpm>PHP FPM</a></li><li><a href=#启用版本信息提示>启用版本信息提示</a></li><li><a href=#已知问题>已知问题</a></li><li><a href=#关注公众号获得更多精彩文章>关注公众号获得更多精彩文章</a></li></ul></nav></div><script>window.addEventListener("DOMContentLoaded",()=>{enableStickyToc()})</script></div><div class="bg-secondary-bg prose col-span-2 rounded p-6 lg:col-span-6"><h3>相关</h3><a href=/2022/02/15/uri-addr/ class=no-underline>hugoio</a><br><a href=/2022/02/15/uri-addr/ class=no-underline>模板-标题</a><br></div></div><script>document.addEventListener("DOMContentLoaded",()=>{hljs.highlightAll()})</script></div></div></main><footer class=pl-scrollbar><div class="mx-auto w-full max-w-screen-xl"><div class="text-center p-6 pin-b"><p class="text-sm text-tertiary-text">&copy; 2021 <a href=https://blog.lbbniu.com/>lbbniu</a>
&#183; Powered by the <a href=https://github.com/wangchucheng/hugo-eureka class=hover:text-eureka>Eureka</a> theme for <a href=https://gohugo.io class=hover:text-eureka>Hugo</a></p></div></div></footer></body></html>